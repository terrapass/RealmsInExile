# Form Isengard Unleashed
form_isengard_unleashed_effect = {
	save_scope_as = isengard_founder

	#Create the title
	create_title_and_vassal_change = {
		type = created
		save_scope_as = title_change
		add_claim_on_loss = no
	}
	title:e_isengard_unleashed = {
		change_title_holder = {
			holder = scope:isengard_founder
			change = scope:title_change
		}
	}
	resolve_title_and_vassal_change = scope:title_change

	add_realm_law_skip_effects = high_partition_succession_law

	assert_if = {
		limit = { NOT = { exists = title:e_isengard_unleashed } }
		text = "Isengard Empire title was not created!"
	}

	hidden_effect = { set_primary_title_to = title:e_isengard_unleashed }

	spawn_isengard_uruk_troops_effect = yes

	every_held_title = {
		limit = {
			tier = tier_empire
			NOT = { this = title:e_isengard_unleashed }
		}
		scope:isengard_founder = {
			destroy_title = prev
		}
	}

	add_character_modifier = {
		modifier = isengard_unleashed_saruman_modifier
	}

	set_global_variable = {
		name = isengard_unleashed_has_spawned
		value = yes
	}
}

# Make sure the Isengard empire has troops...
spawn_isengard_uruk_troops_effect = {
	spawn_army = {
		uses_supply = no
		inheritable = no
		name = isengard_uruk_event_troops
		men_at_arms = {
			type = urukhai_fighting
			stacks = 2
		}
		men_at_arms = {
			type = urukhai_crossbowmen
			stacks = 2
		}
		men_at_arms = {
			type = urukhai_pikemen
			stacks = 2
		}
		men_at_arms = {
			type = urukhai_berserker
			stacks = 1
		}
		men_at_arms = {
			type = urukhai_sappers
			stacks = 1
		}
		men_at_arms = {
			type = urukhai_ballista
			stacks = 1
		}
		location = capital_province
	}
	spawn_army = {
		uses_supply = no
		inheritable = no
		name = isengard_uruk_event_troops
		levies = {
			value = 5000
		}
		men_at_arms = {
			type = urukhai_fighting
			stacks = 2
		}
		men_at_arms = {
			type = urukhai_fighting
			stacks = 2
		}
		men_at_arms = {
			type = urukhai_crossbowmen
			stacks = 2
		}
		men_at_arms = {
			type = urukhai_crossbowmen
			stacks = 2
		}
		men_at_arms = {
			type = urukhai_pikemen
			stacks = 1
		}
		men_at_arms = {
			type = urukhai_ballista
			stacks = 1
		}
		location = capital_province
	}
	spawn_army = {
		uses_supply = no
		inheritable = no
		name = isengard_uruk_event_troops
		levies = {
			value = 5000
		}
		men_at_arms = {
			type = urukhai_fighting
			stacks = 2
		}
		men_at_arms = {
			type = urukhai_fighting
			stacks = 2
		}
		men_at_arms = {
			type = urukhai_pikemen
			stacks = 2
		}
		men_at_arms = {
			type = urukhai_pikemen
			stacks = 2
		}
		men_at_arms = {
			type = urukhai_crossbowmen
			stacks = 1
		}
		men_at_arms = {
			type = urukhai_ballista
			stacks = 1
		}
		location = capital_province
	}
	spawn_army = {
		uses_supply = no
		inheritable = no
		name = isengard_uruk_event_troops
		levies = {
			value = 5000
		}
		men_at_arms = {
			type = urukhai_fighting
			stacks = 2
		}
		men_at_arms = {
			type = urukhai_fighting
			stacks = 2
		}
		men_at_arms = {
			type = urukhai_crossbowmen
			stacks = 2
		}
		men_at_arms = {
			type = urukhai_pikemen
			stacks = 2
		}
		men_at_arms = {
			type = urukhai_berserker
			stacks = 1
		}
		men_at_arms = {
			type = urukhai_ballista
			stacks = 1
		}
		location = capital_province
	}
}


# Populating Isengard's Uruk characters and Saruman's court
#spawn_sarumans_uruk_court_effect = {
#	Add named Uruks.
#	Gríma Wormtongue should travel to Saruman's court.





