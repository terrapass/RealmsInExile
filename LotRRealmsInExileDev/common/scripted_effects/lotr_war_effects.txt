
### LOTR ###

pay_short_term_gold_raze_effect = { # WORKS
	pay_short_term_gold = {
		gold = $GOLD_VALUE$
		target = scope:attacker
		yearly_income = yes
	}
}

decrease_building_or_development = { # VERY WIP
	if = { ### Checks whether county should be made wilderness
		limit = {
			any_in_list = {
				list = $LIST$ 
				tier = tier_county
				OR = {
					county.development_level = 0
					county = {
						title_province = { has_building = dwarven_depths_01 } 
					}
				}	
			}
		}
		every_in_list = { 
			list = $LIST$ 
			tier = tier_county
			limit = {
				OR = {
					county.development_level = 0
					county = {
						title_province = { has_building = dwarven_depths_01 } 
					}
				}
			}
			change_development_level = county.development_level.neg
			make_settlement_county_wilderness = { COUNTY = county }
		}
	}
	else_if = { ### Decrease development + buildings | Dwarves
		limit = { is_dwarf = yes }
		every_in_list = { 
			list = $LIST$ 
			tier = tier_county
			
			decrease_county_development = { COUNTY = county }
			
			county = {
				title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_ale_house } } 
				title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_fungal_farm } } 
				title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_terrace_farm } } 
				title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_mine } } 
				title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_quarry } } 
				title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_crafts } } 
				title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_toolmaker_guild } } 
				title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_forge } } 
				title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_vaults } } 
				title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_roads } } 
				title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_hoard } } 
				title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_armory } } 
				title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_skirmisher_barracks } } 
				title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_siege_workshop } } 
				### Duchy Buildings
				title_province = { destroy_or_downgrade_building_effect = { BUILDING = military_specialization } } 
				title_province = { destroy_or_downgrade_building_effect = { BUILDING = economic_specialization } } 
				title_province = { destroy_or_downgrade_building_effect = { BUILDING = glory_specialization } } 
				### Holding
				title_province = { downgrade_holding_level = { HOLDING = dwarven_depths } }
			}
		}
	}
	else = { ### Decrease development + buildings | Goblins
		if = {
			limit = { is_orc = yes }
			every_in_list = { 
				list = $LIST$ 
				tier = tier_county
				
				decrease_county_development = { COUNTY = county }
			
				county = {
					### In-case underground county has dwarven buildings, due to being conquered earlier
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_ale_house } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_fungal_farm } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_terrace_farm } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_mine } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_quarry } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_crafts } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_toolmaker_guild } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_forge } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_vaults } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_roads } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_hoard } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_armory } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_skirmisher_barracks } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = dwarven_siege_workshop } } 
					### Duchy Buildings
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = military_specialization } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = economic_specialization } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = glory_specialization } } 

					### Orc Buildings
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = raiding_camps } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = uruk_pits } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = furnaces } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = scouting_posts } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = warg_pits } } 
					title_province = { destroy_or_downgrade_building_effect = { BUILDING = orc_siege_works } } 
					### Holding
					title_province = { downgrade_holding_level = { HOLDING = dwarven_depths } }
				}
			}
		}
	}
}

destroy_or_downgrade_building_effect = {
	if = {
		limit = { has_building = $BUILDING$_10 }
		remove_building = $BUILDING$_10
		hidden_effect = { add_building = $BUILDING$_09 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_09 }
		remove_building = $BUILDING$_09
		hidden_effect = { add_building = $BUILDING$_08 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_08 }
		remove_building = $BUILDING$_08
		hidden_effect = { add_building = $BUILDING$_07 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_07 }
		remove_building = $BUILDING$_07
		hidden_effect = { add_building = $BUILDING$_06 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_06 }
		remove_building = $BUILDING$_06
		hidden_effect = { add_building = $BUILDING$_05 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_05 }
		remove_building = $BUILDING$_05
		hidden_effect = { add_building = $BUILDING$_04 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_04 }
		remove_building = $BUILDING$_04
		hidden_effect = { add_building = $BUILDING$_03 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_03 }
		remove_building = $BUILDING$_03
		hidden_effect = { add_building = $BUILDING$_02 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_02 }
		remove_building = $BUILDING$_02
		hidden_effect = { add_building = $BUILDING$_01 }
	}
	else = { 
		if = {
			limit = { has_building = $BUILDING$_01 }
			remove_building = $BUILDING$_01 
		}
	}
}

decrease_county_development = {
	if = {
		limit = { $COUNTY$ = { development_level > 5 } }
		$COUNTY$ = { change_development_level = -6 }
	}
	else_if = { 
		limit = { $COUNTY$ = { development_level > 4 } }
		$COUNTY$ = { change_development_level = -5 }
	}
	else_if = { 
		limit = { $COUNTY$ = { development_level > 3 } }
		$COUNTY$ = { change_development_level = -4 }
	}
	else_if = { 
		limit = { $COUNTY$ = { development_level > 2 } }
		$COUNTY$ = { change_development_level = -3 }
	}
	else = {
		$COUNTY$ = { change_development_level = -2 }
	}
}

downgrade_holding_level = {
	if = {
		limit = { has_building = $HOLDING$_10 }
		add_building = $HOLDING$_09
	}
	else_if = {
		limit = { has_building = $HOLDING$_09 }
		add_building = $HOLDING$_08
	}
	else_if = {
		limit = { has_building = $HOLDING$_08 }
		add_building = $HOLDING$_07
	}
	else_if = {
		limit = { has_building = $HOLDING$_07 }
		add_building = $HOLDING$_06
	}
	else_if = {
		limit = { has_building = $HOLDING$_06 }
		add_building = $HOLDING$_05
	}
	else_if = {
		limit = { has_building = $HOLDING$_05 }
		add_building = $HOLDING$_04
	}
	else_if = {
		limit = { has_building = $HOLDING$_04 }
		add_building = $HOLDING$_03
	}
	else_if = {
		limit = { has_building = $HOLDING$_03 }
		add_building = $HOLDING$_02
	}
	else = { 
		if = {
			limit = { has_building = $HOLDING$_02 }
			add_building = $HOLDING$_01
		}
	}
}