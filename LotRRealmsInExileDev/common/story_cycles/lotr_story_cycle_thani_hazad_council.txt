story_thani_hazad_council = {

	on_setup = { # Story object
		save_scope_as = this_story
		title:e_thani_hazad = {
            set_variable = {
                name = thani_hazad_council_story
                value = scope:this_story
            }
		}
		set_variable = {
			name = council_kingdom
			value = title:e_thani_hazad 
		}
		var:council_kingdom = {
			every_county_in_region = { # Works
				region = custom_balan_lai_regions
				if = {
					limit = { 
						holder = { is_independent_ruler = yes } 
						holder = { is_human = yes }
					}
					holder = { save_scope_as = curr_holder }
					scope:this_story = {
						add_to_variable_list = {
							name = balan_lai_members
							target = scope:curr_holder
						}
					}
				}
			}
		}

		scope:this_story = {

			ordered_in_list = {
				variable = balan_lai_members
				max = 7
				order_by = {
					add = monthly_character_income
					add = average_development_in_holdings
					add = script_current_military_strength
				}
				save_scope_as = curr_ruler
				
				if = {
					limit = { scope:this_story = { has_variable = balan_lai_council_member_1 } }
					scope:this_story = { 
						set_variable = {
							name = balan_lai_council_member_7
							value = scope:curr_ruler
						}
					}
				}
				else_if = {
					limit = { scope:this_story = { has_variable = balan_lai_council_member_6 } }
					scope:this_story = { 
						set_variable = {
							name = balan_lai_council_member_1
							value = scope:curr_ruler
						}
					}
				}
				else_if = {
					limit = { scope:this_story = { has_variable = balan_lai_council_member_2 } }
					scope:this_story = { 
						set_variable = {
							name = balan_lai_council_member_6
							value = scope:curr_ruler
						}
					}
				}
				else_if = {
					limit = { scope:this_story = { has_variable = balan_lai_council_member_5 } }
					scope:this_story = { 
						set_variable = {
							name = balan_lai_council_member_2
							value = scope:curr_ruler
						}
					}
				}
				else_if = {
					limit = { scope:this_story = { has_variable = balan_lai_council_member_3 } }
					scope:this_story = { 
						set_variable = {
							name = balan_lai_council_member_5
							value = scope:curr_ruler
						}
					}
				}
				else_if = {
					limit = { scope:this_story = { has_variable = balan_lai_council_member_4 } }
					scope:this_story = { 
						set_variable = {
							name = balan_lai_council_member_3
							value = scope:curr_ruler
						}
					}
				}
				else = {
					scope:this_story = { 
						set_variable = {
							name = balan_lai_council_member_4
							value = scope:curr_ruler
						}
					}
				}
			}
		}

		scope:this_story = { clear_variable_list = balan_lai_members }
	}

	on_end = { }

	on_owner_death = { }
}
