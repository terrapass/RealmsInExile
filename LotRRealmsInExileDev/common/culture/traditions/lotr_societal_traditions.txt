tradition_mende_anduya = { #Dúnedain insularity
	category = societal

	layers = {
		0 = diplo
		1 = mediterranean
		4 = quill.dds
	}

	is_shown = {
		or = {
			has_cultural_pillar = heritage_dunedain
			has_cultural_pillar = heritage_bellakari
			has_cultural_pillar = heritage_northern_adunaic
			has_cultural_pillar = heritage_southern_adunaic
		}
	}	

	can_pick = {
		trigger_if = { #LotR
            limit = {
                scope:replacing ?= culture_tradition:tradition_variag_succession
            }
            custom_tooltip = {
                text = cannot_replace_variag_succession
                NOT = { has_cultural_tradition = tradition_variag_succession } #To prevent stacking after hybridization
            }
        }
	}
	
	parameters = {
		dislikes_marrying_outside_of_cultural_heritage = yes
		ai_doesnt_marry_outside_cultural_heritage = yes
		courtiers_less_likely_to_leave_same_culture_court = yes
	}
	character_modifier = {
		same_culture_opinion = 10		
	}
	
	cost = {
		prestige = {
			add = {
				value = tradition_base_cost
				desc = BASE
				format = "BASE_VALUE_FORMAT"
			}
			if = {
				limit = {
					NOR = {
						culture_pillar:ethos_communal = { is_in_list = traits }
						culture_pillar:ethos_spiritual = { is_in_list = traits }
						culture_pillar:ethos_stoic = { is_in_list = traits }
					}
				}
				add = {
					value = tradition_incompatible_ethos_penalty
					desc = not_communal_spiritual_or_stoic_desc
				}
			}
			if = {
				limit = {
					scope:character = {
						any_sub_realm_county = {
							culture = scope:character.culture
							any_neighboring_county = {
								NOT = {
									culture = scope:character.culture
								}
								culture = {
									cultural_acceptance = { target = scope:character.culture value >= 40 }
								}
							}
						}
					}
				}
				add = {
					value = tradition_unfulfilled_criteria_penalty
					desc = non_tolerated_cultures_desc
				}
			}
			
			multiply = tradition_replacement_cost_if_relevant
		}
	}
	
	ai_will_do = {
		value = 100
		if = {
			limit = {
				NOT = {
					is_divergent_culture = yes
				}
			}
			multiply = 0
		}
		if = {
			limit = {
				culture_pillar:ethos_egalitarian = { is_in_list = traits }
			}
			multiply = 0
		}
	}
}
tradition_blacknumenorean_legacy = { # Black Numenorean traditions 
	category = societal

	layers = {
		0 = diplo
		1 = western
		4 = blacknumenorean.dds
	}

	is_shown = {
		has_cultural_tradition = tradition_blacknumenorean_legacy
	}

	can_pick = {
		NOT = { has_cultural_tradition = tradition_staunch_traditionalists }
		trigger_if = { #LotR
            limit = {
                scope:replacing ?= culture_tradition:tradition_variag_succession
            }
            custom_tooltip = {
                text = cannot_replace_variag_succession
                NOT = { has_cultural_tradition = tradition_variag_succession } #To prevent stacking after hybridization
            }
        }
	}

	parameters = { 
		dislikes_marrying_outside_of_tradition_blacknumenorean = yes 		
		values_numenorean_blood = yes 
		courtiers_less_likely_to_leave_same_culture_court = yes
		
		# tradition_staunch_traditionalists like parameters
		stubborn_trait_more_common = yes
		expensive_convert_to_local_culture = yes
		harder_to_hybridize = yes
		
		unlock_maa_abrazanim_legion = yes
		unlock_maa_abrazanim_helberdiers = yes
		unlock_maa_abrazanim_warbows = yes
	}
		
	character_modifier = { # change from culture to tenet
		#same_tradition_blacknumenorean_opinion = 5
	}
	
	culture_modifier = {
		cultural_acceptance_gain_mult = -0.35
	}

	county_modifier = {
		monthly_county_control_change_add = 0.5
	}	
}

tradition_slave_society = {
	category = societal

	layers = {
		0 = intrigue
		1 = mediterranean
		4 = battle.dds
	}
	
	is_shown = {
		custom_tooltip = {
			text = not_bellicose_desc
			culture_pillar:ethos_bellicose = { is_in_list = traits }
		}
	}

	can_pick = {
		trigger_if = { #LotR
            limit = {
                scope:replacing ?= culture_tradition:tradition_variag_succession
            }
            custom_tooltip = {
                text = cannot_replace_variag_succession
                NOT = { has_cultural_tradition = tradition_variag_succession } #To prevent stacking after hybridization
            }
        }
	}
	
	parameters = {
		culture_can_raid_at_sea_even_if_feudal = yes
		can_launch_slave_expeditions = yes
	}
	
	culture_modifier = { # LOTR: Generally speaking not found of cultures build on slave trading
		cultural_acceptance_gain_mult = -0.25
	}
	
	character_modifier = {
		max_loot_mult = 0.25
	}
	
	cost = {
		prestige = {
			add = {
				value = tradition_base_cost
				desc = BASE
				format = "BASE_VALUE_FORMAT"
			}
			# Ethos requirement.
			if = {
				limit = {
					NOR = {
						culture_pillar:ethos_bellicose = { is_in_list = traits }
						culture_pillar:ethos_spiritual = { is_in_list = traits }
					}
				}
				add = {
					value = tradition_incompatible_ethos_penalty
					desc = not_bellicose_or_spiritual_desc
				}
			}
			## Coastal requirement.
			#if = {
			#	limit = {
			#		NOT = {
			#			any_culture_county = {
			#				percent >= 0.7
			#				any_county_province = {
			#					is_coastal = yes
			#				}
			#			}
			#		}
			#	}
			#	add = {
			#		value = tradition_unfulfilled_criteria_penalty
			#		desc = high_coastal_percentage_desc
			#	}
			#}
			
			multiply = tradition_replacement_cost_if_relevant
		}
	}
	
	ai_will_do = {
		value = 50
		if = {
			limit = { # The Ioriag-descended peoples (Variags, Tedjin, etc) should have a somewhat higher chance of picking this
				has_cultural_pillar = heritage_ioriag
			}
			multiply = 3
		}
	}
}

tradition_orcish_society = {
	category = societal

	layers = {
		0 = martial
		1 = mediterranean
		4 = battle.dds
	}

	is_shown = {
		has_cultural_pillar = heritage_orc
	}
	
	can_pick = {
		culture_not_pacifistic_trigger = yes
		has_cultural_pillar = heritage_orc
		trigger_if = { #LotR
            limit = {
                scope:replacing ?= culture_tradition:tradition_variag_succession
            }
            custom_tooltip = {
                text = cannot_replace_variag_succession
                NOT = { has_cultural_tradition = tradition_variag_succession } #To prevent stacking after hybridization
            }
        }
	}
	
	parameters = {
		culture_can_raid_at_sea_even_if_feudal = yes
		can_use_conquest_cbs = yes
		cb_lower_prestige_level_requirement = yes
		cheaper_cbs = yes
	}
	
	character_modifier = { # Orcs constantly infight
		monthly_county_control_change_factor = -0.2
		vassal_opinion = -30 # An Orc Overlord can never rest easy
		general_opinion = -10 
		
		ai_honor = -40 # Orcs are not an honorable lot!
		ai_war_chance = 1
		ai_war_cooldown = -0.25
	}
	
	province_modifier = {
		levy_size = 0.15
	}
	
	cost = {
		prestige = {
			add = {
				value = tradition_base_cost
				desc = BASE
				format = "BASE_VALUE_FORMAT"
			}
			if = {
				limit = {
					NOR = {
						culture_pillar:ethos_bellicose = { is_in_list = traits }
						culture_pillar:ethos_spiritual = { is_in_list = traits }
					}
				}
				add = {
					value = tradition_incompatible_ethos_penalty
					desc = not_bellicose_or_spiritual_desc
				}
			}
			if = {
				limit = {
					trigger_if = {
						limit = {
							scope:character = {
								is_ai = no
							}
						}
						NOT = {
							any_ruler = {
								count >= 5
								culture = prev
								primary_title.tier >= tier_county
								is_at_war = yes
							}
						}
					}
					trigger_else = {
						always = no
					}
				}
				add = {
					value = tradition_unfulfilled_criteria_penalty
					desc = rulers_at_war_desc
				}
			}
			
			multiply = tradition_replacement_cost_if_relevant
		}
	}
}

# tradition_dush_hai_cabal = {
# 	category = societal

# 	is_shown = {
# 		has_cultural_pillar = heritage_orc
# 	}

# 	can_pick = {
# 		trigger_if = {
# 			limit = {
# 				exists = scope:replacing
# 				scope:replacing = flag:tradition_variag_succession
# 			}
# 			custom_tooltip = {
# 				text = cannot_replace_variag_succession
# 				NOT = { has_cultural_tradition = tradition_variag_succession } #To prevent stacking after hybridization
# 			}
# 		}
# 	}
	
# 	parameters = {
# 		sorcerer_trait_gives_bonuses = yes
# 		sorcerer_trait_more_common = yes
# 		expensive_convert_to_local_culture = yes
# 		unlock_maa_orc_dush_hai_warband = yes
# 	}

# 	cost = {
# 		prestige = {
# 			add = {
# 				value = tradition_base_cost
# 				desc = BASE
# 				format = "BASE_VALUE_FORMAT"
# 			}
# 			if = {
# 				limit = {
# 					NOR = {
# 						culture_pillar:ethos_communal = { is_in_list = traits }
# 						culture_pillar:ethos_spiritual = { is_in_list = traits }
# 					}
# 				}
# 				add = {
# 					value = tradition_incompatible_ethos_penalty
# 					desc = not_communal_or_spiritual_desc
# 				}
# 			}
# 			if = {
# 				limit = {
# 					trigger_if = {
# 						limit = {
# 							scope:character = {
# 								is_ai = no
# 							}
# 						}
# 						NOT = {
# 							any_ruler = {
# 								count >= 3
# 								culture = prev
# 								primary_title.tier >= tier_county
# 								is_sorcerer = yes
# 							}
# 						}
# 					}
# 					trigger_else = {
# 						always = no
# 					}
# 				}
# 				add = {
# 					value = tradition_unfulfilled_criteria_penalty
# 					desc = rulers_with_mystic_desc
# 				}
# 			}
			
# 			multiply = tradition_replacement_cost_if_relevant
# 		}
# 	}
	
# 	ai_will_do = {
# 		value = 100
# 		if = {
# 			limit = {
# 				NOT = {
# 					culture_pillar:ethos_spiritual = { is_in_list = traits }
# 				}
# 			}
# 			multiply = 0.7
# 		}
# 	}
# }

### Elven ###
tradition_nelyarin_heritage = { # For Avari of primarily Nelyarin descent
	category = societal

	layers = {
		0 = diplo
		1 = mediterranean
		4 = quill.dds
	}

	is_shown = {
		has_cultural_pillar = heritage_moriquendi
	}	

	can_pick = {
		trigger_if = { #LotR
            limit = {
                scope:replacing ?= culture_tradition:tradition_variag_succession
            }
            custom_tooltip = {
                text = cannot_replace_variag_succession
                NOT = { has_cultural_tradition = tradition_variag_succession } #To prevent stacking after hybridization
            }
        }
	}
	
	parameters = {
		dislikes_marrying_outside_of_cultural_heritage = yes
		courtiers_less_likely_to_leave_same_culture_court = yes
		# Add bonus to learning Sindarin and relations with other Telerin cultures (IE Sindar, Silvan, etc)
		unlock_maa_nelyarin_archers = yes
		unlock_maa_nelyarin_swordsmen = yes
		unlock_maa_nelyarin_pikemen = yes
		unlock_maa_nuinevari = yes
	}
	
	culture_modifier = {
	}
	character_modifier = {
		same_culture_opinion = 10		
	}
	county_modifier = {
	}
	
	cost = {
		prestige = {
			add = {
				value = tradition_base_cost
				desc = BASE
				format = "BASE_VALUE_FORMAT"
			}
			if = {
				limit = {
					NOR = {
						culture_pillar:ethos_communal = { is_in_list = traits }
						culture_pillar:ethos_spiritual = { is_in_list = traits }
						culture_pillar:ethos_stoic = { is_in_list = traits }
					}
				}
				add = {
					value = tradition_incompatible_ethos_penalty
					desc = not_communal_spiritual_or_stoic_desc
				}
			}
			if = {
				limit = {
					scope:character = {
						any_sub_realm_county = {
							culture = scope:character.culture
							any_neighboring_county = {
								NOT = {
									culture = scope:character.culture
								}
								culture = {
									cultural_acceptance = { target = scope:character.culture value >= 40 }
								}
							}
						}
					}
				}
				add = {
					value = tradition_unfulfilled_criteria_penalty
					desc = non_tolerated_cultures_desc
				}
			}
			
			multiply = tradition_replacement_cost_if_relevant
		}
	}
	
	ai_will_do = {
		value = 100
		if = {
			limit = {
				NOT = {
					is_divergent_culture = yes
				}
			}
			multiply = 0
		}
		if = {
			limit = {
				culture_pillar:ethos_egalitarian = { is_in_list = traits }
			}
			multiply = 0
		}
	}
}

## KHAND ## 
tradition_variag_succession = {
	category = combat

	layers = {
		0 = martial
		1 = mena
		4 = swords.dds
	}
	
	can_pick = {
		culture_not_pacifistic_trigger = yes
		always = no
	}
	
	parameters = {
		realms_shatter_on_succession = yes
		realms_destroyed_on_succession = yes
		can_designate_heir = yes
		cannot_hybridize = yes
		cannot_diverge = yes
		cannot_convert_to_local_culture = yes
	}
	
	character_modifier = {
		long_reign_bonus_mult = 0.5
		short_reign_duration_mult = -1
		vassal_opinion = 10
		fellow_vassal_opinion = -10
	}
	
	cost = {
		prestige = {
			add = {
				value = tradition_base_cost
				desc = BASE
				format = "BASE_VALUE_FORMAT"
			}
			if = {
				limit = {
					NOR = {
						culture_pillar:ethos_bellicose = { is_in_list = traits }
						culture_pillar:ethos_spiritual = { is_in_list = traits }
					}
				}
				add = {
					value = tradition_incompatible_ethos_penalty
					desc = not_bellicose_or_spiritual_desc
				}
			}
			if = {
				limit = {
					trigger_if = {
						limit = {
							scope:character = {
								is_ai = no
							}
						}
						NOT = {
							any_ruler = {
								count >= 5
								culture = prev
								primary_title.tier >= tier_county
								is_at_war = yes
							}
						}
					}
					trigger_else = {
						always = no
					}
				}
				add = {
					value = tradition_unfulfilled_criteria_penalty
					desc = rulers_at_war_desc
				}
			}
			
			multiply = tradition_replacement_cost_if_relevant
		}
	}
	
	ai_will_do = {
		value = 0
	}
}

tradition_variag_succession_stable = {
	category = combat

	layers = {
		0 = martial
		1 = mena
		4 = crown.dds
	}
	
	can_pick = {
		culture_not_pacifistic_trigger = yes
		always = no
	}
	
	parameters = {
		can_designate_heir = yes
		harder_to_hybridize = yes
		expensive_convert_to_local_culture = yes
	}
	
	character_modifier = {
		long_reign_bonus_mult = 0.5
		short_reign_duration_mult = -1
		vassal_opinion = 10
		fellow_vassal_opinion = -10
	}
	
	cost = {
		prestige = {
			add = {
				value = tradition_base_cost
				desc = BASE
				format = "BASE_VALUE_FORMAT"
			}
			if = {
				limit = {
					NOR = {
						culture_pillar:ethos_bellicose = { is_in_list = traits }
						culture_pillar:ethos_spiritual = { is_in_list = traits }
					}
				}
				add = {
					value = tradition_incompatible_ethos_penalty
					desc = not_bellicose_or_spiritual_desc
				}
			}
			if = {
				limit = {
					trigger_if = {
						limit = {
							scope:character = {
								is_ai = no
							}
						}
						NOT = {
							any_ruler = {
								count >= 5
								culture = prev
								primary_title.tier >= tier_county
								is_at_war = yes
							}
						}
					}
					trigger_else = {
						always = no
					}
				}
				add = {
					value = tradition_unfulfilled_criteria_penalty
					desc = rulers_at_war_desc
				}
			}
			
			multiply = tradition_replacement_cost_if_relevant
		}
	}
	
	ai_will_do = {
		value = 0
	}
}

tradition_legendary_artisans = {
	category = societal

	layers = {
		0 = steward
		1 = mena
		4 = artisan.dds
	}
	
	is_shown = {
		has_dlc_feature = royal_court
		has_cultural_pillar = heritage_calaquendi
		has_cultural_pillar = heritage_khazad
	}

	can_pick = {
		trigger_if = { #LotR
            limit = {
                scope:replacing ?= culture_tradition:tradition_variag_succession
            }
            custom_tooltip = {
                text = cannot_replace_variag_succession
                NOT = { has_cultural_tradition = tradition_variag_succession } #To prevent stacking after hybridization
            }
        }
	}
	
	parameters = {
		legendary_inspiration = yes
	}
	county_modifier = {
		build_gold_cost = -0.2
	}
	
	cost = {
		prestige = {
			add = {
				value = tradition_base_cost
				desc = BASE
				format = "BASE_VALUE_FORMAT"
			}
			if = {
				limit = {
					NOR = {
						culture_pillar:ethos_courtly = { is_in_list = traits }
						culture_pillar:ethos_communal = { is_in_list = traits }
						culture_pillar:ethos_spiritual = { is_in_list = traits }
					}
				}
				add = {
					value = tradition_incompatible_ethos_penalty
					desc = not_courtly_communal_or_spiritual_desc
				}
			}
			if = {
				limit = {
					trigger_if = {
						limit = {
							scope:character = {
								is_ai = no
							}
						}
						NOT = {
							any_ruler = {
								count >= 3
								culture = prev
								primary_title.tier >= tier_county
								OR = {
									has_completed_inspiration = yes
									any_courtier_or_guest = {
										OR = {
											has_completed_inspiration = yes
											exists = inspiration
										}
									}
								}
							}
						}
					}
					trigger_else = {
						always = no
					}
				}
				add = {
					value = tradition_unfulfilled_criteria_penalty
					desc = has_courtier_or_guest_with_inspiration_desc
				}
			}

			multiply = tradition_replacement_cost_if_relevant
		}
	}

	ai_will_do = {
		value = 100
	}
}

tradition_hobbit_feasts = {
	category = ritual

	layers = {
		0 = diplo
		1 = indian
		4 = food.dds
	}
	
	is_shown = {
		or = {
			has_cultural_pillar = heritage_periannath
		}
	}

	can_pick = { #LotR
		trigger_if = { #LotR
            limit = {
                scope:replacing ?= culture_tradition:tradition_variag_succession
            }
            custom_tooltip = {
                text = cannot_replace_variag_succession
                NOT = { has_cultural_tradition = tradition_variag_succession } #To prevent stacking after hybridization
            }
        }
	}

	parameters = {
		more_frequent_feasts = yes
		reveler_traits_more_common = yes
		reveler_traits_more_valued = yes
		refined_feasts = yes
		renown_from_feasts = yes
		characters_are_better_food_tasters = yes
		lazy_trait_more_common = yes
		gluttonous_trait_more_common = yes
	}
	
	cost = {
		prestige = {
			add = {
				value = tradition_base_cost
				desc = BASE
				format = "BASE_VALUE_FORMAT"
			}
			if = {
				limit = {
					NOR = {
						culture_pillar:ethos_courtly = { is_in_list = traits }
						culture_pillar:ethos_communal = { is_in_list = traits }
						culture_pillar:ethos_stoic = { is_in_list = traits }
					}
				}
				add = {
					value = tradition_incompatible_ethos_penalty
					desc = not_courtly_communal_or_stoic_desc
				}
			}
			if = {
				limit = {
					trigger_if = {
						limit = {
							scope:character = {
								is_ai = no
							}
						}
						NOT = {
							any_ruler = {
								count >= 5
								culture = prev
								primary_title.tier >= tier_county
								has_trait = lifestyle_reveler
							}
						}
					}
					trigger_else = {
						always = no
					}
				}
				add = {
					value = tradition_unfulfilled_criteria_penalty
					desc = rulers_with_reveler_lifestyle_desc
				}
			}
			
			multiply = tradition_replacement_cost_if_relevant
		}
	}
	
	ai_will_do = {
		value = 100
		if = {
			limit = {
				NOT = {
					scope:character = {
						has_trait = lifestyle_reveler
					}
				}
			}
			multiply = 0.5
		}
	}
}