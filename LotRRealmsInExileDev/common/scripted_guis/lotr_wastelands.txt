## GUI (MANUAL) TRIGGER OF COLONIZATION
## For AI random events for colonization, check_
## - yearly_on_actions.txt
## - lotr_wasteland_events.txt
## - lotr_wasteland_effects.txt

gui_not_is_character_wastelands = {
	scope = character
	is_shown = {
		NOT = {
			has_culture = culture:wastelands
		}
	}
}

gui_not_is_province_wastelands = {
	scope = province
	is_shown = {
		NOT = {
			culture = culture:wastelands
		}
	}
}


gui_is_character_wastelands = {
	scope = character
	is_shown = {
		has_culture = culture:wastelands
	}
}

gui_is_province_wastelands = {
	scope = province
	is_shown = {
		culture = culture:wastelands
	}
}

gui_can_colonize = {
	scope = character
	saved_scope = {
		wastelands
	}
	
	# This is triggered by events to get more control
	ai_is_valid = { }
	
	is_valid = {
		exists = root
		gold >= 100
		prestige >= 100
		
		is_independent_ruler = yes

		NOT = {
			has_character_flag = colonization_cooldown_flag
		}
		
		# Only surrounding lands
		any_sub_realm_county = {
			any_neighboring_county = {
				this = scope:wastelands.county
			}
		}
	}


	## Check lotr_wastelands_effects.txt
	effect = {
		ai_colonization_effect = { WASTELANDS = scope:wastelands }
		
		#scope:wastelands.county = {
		#	save_scope_as = wastelands_holder_title
		#}
		#scope:wastelands_holder_title.holder = {
		#	save_scope_as = wastelands_holder
		#}
		#send_interface_toast = {
		#	title = colonization_started_title
		#	left_icon = root		
		#		
		#	remove_short_term_gold = 100
		#	add_prestige = -100
		#		
		#	add_character_flag = {
		#		flag = colonization_cooldown_flag
		#		years = 5
		#	}
		#}		
		#create_title_and_vassal_change = {
  		#	type = granted
  		#	save_scope_as = change
		#}
 		#scope:wastelands_holder_title = {
	  	#	change_title_holder = {
		#		holder = root
		#		change = scope:change
		#		take_baronies = yes
		#	}
		#	set_county_faith = root.faith
		#	set_county_culture = root.culture
 		#}
		#resolve_title_and_vassal_change = scope:change
		#scope:wastelands_holder_title = {
		#	every_province = {
		#		limit = {
		#			has_holding_type = wastelands_holding
		#		}
		#		set_holding_type = settlement_holding
		#	}			
		#	generate_coa = yes
		#}
	}
}