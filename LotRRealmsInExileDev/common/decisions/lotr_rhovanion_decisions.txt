### Rhovanion Decisions ###
 
decision_restore_rhovanion = {
	title = decision_restore_rhovanion
	picture = "gfx/interface/illustrations/decisions/decision_shire_01.dds"
	major = yes
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_restore_rhovanion_tooltip
	desc = decision_restore_rhovanion_desc
	confirm_text = decision_restore_rhovanion_confirm
	is_shown = {
		OR = { # Available only to those with the cultural tradition symbolized the scattered heirs to the Kingdom of Rhovanion who still remember it
			culture = { has_cultural_tradition = tradition_a_scattered_people }
		}
		
		is_independent_ruler = yes
		
		NOR = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_restore_rhovanion
			}		
			has_title = title:k_dale # The Kings of Dale have no interest in reviving Rhovanion
			has_title = title:k_dorwinion # The Realm-Masters of Dale have no interest in reviving Rhovanion
		}
	}
	
	is_valid = {
		prestige_level >= high_prestige_level
		completely_controls = title:d_heahand # Completely controls the old heartland of the Kingdom
		completely_controls = title:d_east_bight
		realm_size >= 25
		highest_held_title_tier < tier_kingdom
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	effect = {
		get_title = title:k_rhovanion
		custom_tooltip = rhovanion_formation_drift_tooltip
		
		province:3826 = {
			add_special_building_slot = wonder_high_hall_alcisbaurg
		}

		# Removed 'Scattered People' and add 'A People Reforged'
		root.culture = {
			custom_tooltip = {
				text = decision_remove_rhovannorim_tradition_1
				remove_culture_tradition = tradition_a_people_reforged
			}
		}
		root.culture = {
			custom_tooltip = {
				text = decision_rhovannorim_new_tradition_1
				add_culture_tradition = tradition_a_people_reforged
			}
		}

		if = {
			limit = { has_government = tribal_government }
			convert_whole_realm_to_feudalism_effect = yes
			add_realm_law_skip_effects = crown_authority_1
			root.dynasty = {
				add_dynasty_prestige = 500
			}
		}
		else_if = {
			limit = { 
				OR = {
					has_government = clan_government
					has_government = feudal_government
				}
			}
			root.dynasty = {
				add_dynasty_prestige = 500
			}
			add_realm_law_skip_effects = crown_authority_3
			add_piety = 1000
			add_prestige = 1000
		}

		hidden_effect = {
			title:d_heahand = {
				set_de_jure_liege_title = title:k_rhovanion
			}
			title:d_east_bight = {
				set_de_jure_liege_title = title:k_rhovanion
			}
			if = {
				limit = {
					completely_controls = title:d_anthardor
				}
				title:d_anthardor = {
					set_de_jure_liege_title = title:k_rhovanion
				}
			}
			if = {
				limit = {
					completely_controls = title:d_sunnarinna
				}
				title:d_sunnarinna = {
					set_de_jure_liege_title = title:k_rhovanion
				}
			}
			if = {
				limit = {
					completely_controls = title:d_rinnavuld
				}
				title:d_rinnavuld = {
					set_de_jure_liege_title = title:k_rhovanion
				}
			}
			title:k_rhovanion = {
				set_de_jure_liege_title = title:e_rhovanion
			}
		}
		
		set_primary_title_to = title:k_rhovanion

		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_restore_rhovanion
		}
		title:k_rhovanion.holder = {
			save_scope_as = vidugavia_heir
		}
		#trigger_event = {
		#	id = rhovanion.0102
		#	days = 1
		#}
	}
}


#decision_western_rhovanion = { # Integration of the Dorwinion Western Provinces
#	title = decision_western_rhovanion
#	picture = "gfx/interface/illustrations/decisions/decision_shire_01.dds"
#	major = yes
#	ai_goal = yes
#	ai_potential = {
#		always = yes
#	}
#	ai_will_do = {
#		base = 100
#	}
#	selection_tooltip = decision_western_rhovanion_tooltip
#	desc = decision_western_rhovanion_desc
#	confirm_text = decision_western_rhovanion_confirm
#	is_shown = {
#		is_target_in_global_variable_list = {
#			name = unavailable_unique_decisions
#			target = flag:decision_restore_rhovanion
#		}
#		
#		OR = {
#			has_primary_title = title:k_rhovanion
#			AND = {
#				has_primary_title = title:e_rhovanion
#				has_title = title:k_rhovanion
#			}
#		}
#		
#		NOR = {
#			is_target_in_global_variable_list = {
#				name = unavailable_unique_decisions
#				target = flag:decision_western_rhovanion
#			}
#			culture.any_parent_culture_or_above = culture:woodsmen # Woodsmen have no ambition for Rhovanion
#			culture = culture:woodsmen
#			has_title = title:k_dale # The Kings of Dale have no interest in reviving Rhovanion
#		}
#	}
#	
#	is_valid = {
#		prestige_level >= very_high_prestige_level
#		completely_controls = title:d_aivathuidor # Completely controls the old heartland of the Kingdom
#		completely_controls = title:d_east_bight
#		realm_size >= 20
#	}
#	is_valid_showing_failures_only = {
#		is_imprisoned = no
#		is_available_adult = yes
#		is_at_war = no
#	}
#	effect = {
#		get_title = title:k_rhovanion
#		
#		#title:b_alcisbaurg = {
#		#	add_special_building_slot = wonder_high_hall_alcisbaurg
#		#}	
#		
#		hidden_effect = {
#				title:d_heahand = {
#					set_de_jure_liege_title = title:k_rhovanion
#				}
#				title:d_east_bight = {
#					set_de_jure_liege_title = title:k_rhovanion
#				}
#				if = {
#					limit = {
#						title:d_anthandor = {
#							completely_controls = yes
#						}
#					}
#					title:d_anthandor = {
#						set_de_jure_liege_title = title:k_rhovanion
#					}
#				}
#				if = {
#					limit = {
#						title:sunnarinna = {
#							completely_controls = yes
#						}
#					}
#					title:sunnarinna = {
#						set_de_jure_liege_title = title:k_rhovanion
#					}
#				}
#				if = {
#					limit = {
#						title:rinnavuld = {
#							completely_controls = yes
#						}
#					}
#					title:rinnavuld = {
#						set_de_jure_liege_title = title:k_rhovanion
#					}
#				}
#			}
#			title:k_rhovanion = {
#				set_de_jure_liege_title = title:e_rhovanion
#			}
#		}
#		#trigger_event = {
#		#	id = anduin_vale.0102
#		#	days = 1
#		#}	
#		set_primary_title_to = title:k_rhovanion
#
#		add_to_global_variable_list = {
#			name = unavailable_unique_decisions
#			target = flag:decision_restore_rhovanion
#		}
#	}
#}
