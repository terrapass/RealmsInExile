### ABRAKHÂN DECISIONS ###
decision_abrakhan_request_lands = { # To request lands from Sauron for objectives
	title = decision_abrakhan_request_lands
	picture = "gfx/interface/illustrations/decisions/decision_harad_07.dds"
	major = yes
	ai_goal = yes
	selection_tooltip = decision_abrakhan_request_lands_tooltip
	desc = decision_abrakhan_request_lands_desc
	
	confirm_text = decision_abrakhan_request_lands_confirm

	cooldown = { years = 5 }
	
	is_shown = {
		#completely_controls = title:k_abrakhan
		is_nazgul = yes
		character:lineofsauron = { is_alive = yes is_ai= yes is_independent_ruler = yes }
		has_character_flag = goldenking
	}
	is_valid = {
		custom_tooltip = {
			text = abrakhan_sauron_holds_titles_in_the_south_tt
			character:lineofsauron = {
				any_realm_county = {
					OR = {
						empire = title:e_haradwaith
						empire = title:e_umbar
						empire = title:e_bellakar
						empire = title:e_bozisha_miraz
						empire = title:e_nafarat
						empire = title:e_dune_sea
						empire = title:e_thani_hazad
					}
				}
			}
		}	
		custom_tooltip = {
			text = abrakhan_sauron_is_neighbor_tt
			character_is_land_realm_neighbor = character:lineofsauron
		}
	}
	is_valid_showing_failures_only = {
		is_adult = yes
		is_available = yes
		is_independent_ruler = yes
	}
	
	effect = {
		create_title_and_vassal_change = {
			type = swear_fealty
			save_scope_as = change
			add_claim_on_loss = no
		}
		character:lineofsauron = {
			every_held_title = {
				limit = {
					OR = {
						empire = title:e_haradwaith
						empire = title:e_umbar
						empire = title:e_bellakar
						empire = title:e_bozisha_miraz
						empire = title:e_nafarat
						empire = title:e_dune_sea
						empire = title:e_thani_hazad
					}
					is_neighbor_to_realm = root
				}
				change_title_holder = {
					holder = root
					change = scope:change
				}
			}
			every_vassal_or_below = {
				limit = {
					any_held_title = {
						tier > tier_barony
						OR = {
							empire = title:e_haradwaith
							empire = title:e_umbar
							empire = title:e_bellakar
							empire = title:e_bozisha_miraz
							empire = title:e_nafarat
							empire = title:e_dune_sea
							empire = title:e_thani_hazad
						}
						holder = {
							character_is_land_realm_neighbor = root
						}
					}
				}
				change_liege = {
					liege = root
					change = scope:change
				}
			}
		}
		resolve_title_and_vassal_change = scope:change
		add_character_flag = {
			flag = recently_asked_sauron_for_land
			years = 5
		}
	}
	
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
}

decision_abrakhan_subjugation_nafarat = {#
	title = decision_abrakhan_subjugation_nafarat
	picture = "gfx/interface/illustrations/decisions/decision_harad_07.dds"
	major = yes
	ai_goal = yes
	selection_tooltip = decision_abrakhan_subjugation_nafarat_tooltip
	desc = decision_abrakhan_subjugation_nafarat_desc
	
	confirm_text = decision_abrakhan_subjugation_nafarat_confirm
	
	is_shown = {
		is_nazgul = yes
		character_is_valid_for_abrakhan_subjugation_mission_trigger = yes
		has_character_flag = abrakhan_subjugation_nafarat_decision_unlock
		NOT = { has_character_flag = abrakhan_subjugation_nafarat_decision_complete }
	}
	is_valid = {
		completely_controls = title:k_abrakhan
		completely_controls = title:k_nafarati
		completely_controls = title:k_darsalan
		has_title = title:e_nafarat
	}
	is_valid_showing_failures_only = {
		is_adult = yes
		is_available = yes
		is_independent_ruler = yes
	}
	
	effect = {
		show_as_tooltip = { abrakhan_subjugation_nafarat_effect = yes }
		# Form greater Abrakhân.
		custom_tooltip = abrakhan.1020.tt
		form_abrakhan_decision_effect = yes
		remove_character_flag = abrakhan_subjugation_nafarat_decision_unlock
		add_character_flag = abrakhan_subjugation_nafarat_decision_complete
		trigger_event = abrakhan.1020
		if = {
			limit = { NOT = { has_character_flag = abrakhan_subjugation_ray_decision_complete } }
			add_character_flag = abrakhan_subjugation_ray_decision_unlock
		}
		if = {
			limit = { NOT = { has_character_flag = abrakhan_subjugation_dune_sea_decision_complete } }
			add_character_flag = abrakhan_subjugation_dune_sea_decision_unlock
		}
	}
	
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
}
decision_abrakhan_subjugation_dune_sea = {
	title = decision_abrakhan_subjugation_dune_sea
	picture = "gfx/interface/illustrations/terrain_types/dune_sea.dds"
	major = yes
	ai_goal = yes
	selection_tooltip = decision_abrakhan_subjugation_dune_sea_tooltip
	desc = decision_abrakhan_subjugation_dune_sea_desc
	
	confirm_text = decision_abrakhan_subjugation_dune_sea_confirm
	
	is_shown = {
		is_nazgul = yes
		character_is_valid_for_abrakhan_subjugation_mission_trigger = yes
		has_character_flag = abrakhan_subjugation_dune_sea_decision_unlock
		NOT = { has_character_flag = abrakhan_subjugation_dune_sea_decision_complete }
	}
	is_valid = {
		completely_controls = title:e_dune_sea
	}
	is_valid_showing_failures_only = {
		is_adult = yes
		is_available = yes
		is_independent_ruler = yes
	}
	
	effect = {
		show_as_tooltip = {
			abrakhan_subjugation_dune_sea_effect = yes
		}
		remove_character_flag = abrakhan_subjugation_dune_sea_decision_unlock
		add_character_flag = abrakhan_subjugation_dune_sea_decision_complete
		trigger_event = abrakhan.1021
		if = {
			limit = { NOT = { has_character_flag = abrakhan_subjugation_near_harad_decision_complete } }
			add_character_flag = abrakhan_subjugation_near_harad_decision_unlock
		}
		if = {
			limit = { NOT = { has_character_flag = abrakhan_subjugation_bellakar_decision_complete } }
			add_character_flag = abrakhan_subjugation_bellakar_decision_unlock
		}
	}
	
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
}
#decision_abrakhan_subjugation_mahud = {
#	picture = "gfx/interface/illustrations/decisions/decision_harad_05.dds"
#}
decision_abrakhan_subjugation_ray = {
	title = decision_abrakhan_subjugation_ray
	picture = "gfx/interface/illustrations/decisions/decision_harad_02.dds"
	major = yes
	ai_goal = yes
	selection_tooltip = decision_abrakhan_subjugation_ray_tooltip
	desc = decision_abrakhan_subjugation_ray_desc
	
	confirm_text = decision_abrakhan_subjugation_ray_confirm
	
	is_shown = {
		is_nazgul = yes
		character_is_valid_for_abrakhan_subjugation_mission_trigger = yes
		has_character_flag = abrakhan_subjugation_ray_decision_unlock
		NOT = { has_character_flag = abrakhan_subjugation_ray_decision_complete }
	}
	is_valid = {
		OR = {
			completely_controls = title:e_abrakhan
			completely_controls = title:e_nafarat
		}
		completely_controls = title:k_ray
		completely_controls = title:k_raishoul
		completely_controls = title:k_zajantak#
	}
	is_valid_showing_failures_only = {
		is_adult = yes
		is_available = yes
		is_independent_ruler = yes
	}
	
	effect = {
		remove_character_flag = abrakhan_subjugation_ray_decision_unlock
		add_character_flag = abrakhan_subjugation_ray_decision_complete
		abrakhan_subjugation_ray_effect = yes
		trigger_event = abrakhan.1010
		if = {
			limit = { NOT = { has_character_flag = abrakhan_subjugation_mardruak_decision_complete } }
			add_character_flag = abrakhan_subjugation_mardruak_decision_unlock
		}
		if = {
			limit = { NOT = { has_character_flag = abrakhan_subjugation_bellakar_decision_complete } }
			add_character_flag = abrakhan_subjugation_bellakar_decision_unlock
		}
	}
}
decision_abrakhan_subjugation_bellakar = {
	title = decision_abrakhan_subjugation_bellakar
	picture = "gfx/interface/illustrations/decisions/decision_harad_03.dds"
	major = yes
	ai_goal = yes
	selection_tooltip = decision_abrakhan_subjugation_bellakar_tooltip
	desc = decision_abrakhan_subjugation_bellakar_desc
	
	confirm_text = decision_abrakhan_subjugation_bellakar_confirm
	
	is_shown = {
		is_nazgul = yes
		character_is_valid_for_abrakhan_subjugation_mission_trigger = yes
		has_character_flag = abrakhan_subjugation_bellakar_decision_unlock
		NOT = { has_character_flag = abrakhan_subjugation_bellakar_decision_complete }
	}
	is_valid = {
		OR = {
			completely_controls = title:e_abrakhan
			completely_controls = title:e_nafarat
		}
		completely_controls = title:e_bellakar
	}
	is_valid_showing_failures_only = {
		is_adult = yes
		is_available = yes
		is_independent_ruler = yes
	}
	
	effect = {
		remove_character_flag = abrakhan_subjugation_bellakar_decision_unlock
		add_character_flag = abrakhan_subjugation_bellakar_decision_complete
		abrakhan_subjugation_bellakar_effect = yes
		trigger_event = abrakhan.1010
		if = {
			limit = { NOT = { has_character_flag = abrakhan_subjugation_ray_decision_complete } }
			add_character_flag = abrakhan_subjugation_ray_decision_unlock
		}
		if = {
			limit = { NOT = { has_character_flag = abrakhan_subjugation_mardruak_decision_complete } }
			add_character_flag = abrakhan_subjugation_mardruak_decision_unlock
		}
	}
}
decision_abrakhan_subjugation_mardruak = {
	title = decision_abrakhan_subjugation_mardruak
	picture = "gfx/interface/illustrations/decisions/decision_corsair_01.dds"
	major = yes
	ai_goal = yes
	selection_tooltip = decision_abrakhan_subjugation_mardruak_tooltip
	desc = decision_abrakhan_subjugation_mardruak_desc
	
	confirm_text = decision_abrakhan_subjugation_mardruak_confirm
	
	is_shown = {
		is_nazgul = yes
		character_is_valid_for_abrakhan_subjugation_mission_trigger = yes
		has_character_flag = abrakhan_subjugation_mardruak_decision_unlock
		NOT = { has_character_flag = abrakhan_subjugation_mardruak_decision_complete }
	}
	is_valid = {
		completely_controls = title:k_mardruak
	}
	is_valid_showing_failures_only = {
		is_adult = yes
		is_available = yes
		is_independent_ruler = yes
	}
	
	effect = {
		remove_character_flag = abrakhan_subjugation_mardruak_decision_unlock
		add_character_flag = abrakhan_subjugation_mardruak_decision_complete
		abrakhan_subjugation_mardruak_effect = yes
		trigger_event = abrakhan.1010
		if = {
			limit = { NOT = { has_character_flag = abrakhan_subjugation_umbar_decision_complete } }
			add_character_flag = abrakhan_subjugation_umbar_decision_unlock
		}
	}
	
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
}
decision_abrakhan_subjugation_near_harad = {
	title = decision_abrakhan_subjugation_near_harad
	picture = "gfx/interface/illustrations/decisions/decision_harad_04.dds"
	major = yes
	ai_goal = yes
	selection_tooltip = decision_abrakhan_subjugation_near_harad_tooltip
	desc = decision_abrakhan_subjugation_near_harad_desc
	
	confirm_text = decision_abrakhan_subjugation_near_harad_confirm
	
	is_shown = {
		is_nazgul = yes
		character_is_valid_for_abrakhan_subjugation_mission_trigger = yes
		has_character_flag = abrakhan_subjugation_near_harad_decision_unlock
		NOT = { has_character_flag = abrakhan_subjugation_near_harad_decision_complete }
	}
	is_valid = {
		OR = {
			completely_controls = title:e_abrakhan
			completely_controls = title:e_nafarat
		}
		completely_controls = title:e_dune_sea
		completely_controls = title:e_haradwaith
	}
	is_valid_showing_failures_only = {
		is_adult = yes
		is_available = yes
		is_independent_ruler = yes
	}
	
	effect = {
		remove_character_flag = abrakhan_subjugation_near_harad_decision_unlock
		add_character_flag = abrakhan_subjugation_near_harad_decision_complete
		abrakhan_subjugation_near_harad_effect = yes
		trigger_event = abrakhan.1010
		if = {
			limit = { NOT = { has_character_flag = abrakhan_subjugation_umbar_decision_complete } }
			add_character_flag = abrakhan_subjugation_umbar_decision_unlock
		}
	}
}
decision_abrakhan_subjugation_umbar = {
	title = decision_abrakhan_subjugation_umbar
	picture = "gfx/interface/illustrations/decisions/decision_harad_01.dds"
	major = yes
	ai_goal = yes
	selection_tooltip = decision_abrakhan_subjugation_umbar_tooltip
	desc = decision_abrakhan_subjugation_umbar_desc
	
	confirm_text = decision_abrakhan_subjugation_umbar_confirm
	
	is_shown = {
		is_nazgul = yes
		character_is_valid_for_abrakhan_subjugation_mission_trigger = yes
		has_character_flag = abrakhan_subjugation_umbar_decision_unlock
		NOT = { has_character_flag = abrakhan_subjugation_umbar_decision_unlock_complete }
	}
	is_valid = {
		OR = {
			completely_controls = title:e_abrakhan
			completely_controls = title:e_nafarat
		}
		completely_controls = title:e_umbar
	}
	is_valid_showing_failures_only = {
		is_adult = yes
		is_available = yes
		is_independent_ruler = yes
	}
	
	effect = {
		remove_character_flag = abrakhan_subjugation_umbar_decision_unlock
		add_character_flag = abrakhan_subjugation_umbar_decision_unlock_complete
		abrakhan_subjugation_umbar_effect = yes
		if = {
			limit = { NOT = { has_character_flag = abrakhan_subjugation_near_harad_decision_complete } }
			add_character_flag = abrakhan_subjugation_near_harad_decision_unlock
		}
	}
}
