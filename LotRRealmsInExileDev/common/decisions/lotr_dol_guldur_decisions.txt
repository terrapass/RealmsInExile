### Dol Guldur ###

################################################
### 1. Dol Guldur Event Chain     			 ###
### Demand Submission to Dol Guldur          ###
### Created by Fredsch            			 ###
################################################

decision_demand_submission_to_dol_guldur = {
	title = decision_demand_submission_to_dol_guldur
	desc = decision_demand_submission_to_dol_guldur_desc
	confirm_text = decision_demand_submission_to_dol_guldur_confirm
	selection_tooltip = decision_demand_submission_to_dol_guldur_tooltip
	picture = "gfx/interface/illustrations/decisions/decision_woodmen.dds"
	sort_order = 5
	major = yes

	# Shown
	is_shown = {
		is_landed = yes
		has_title = title:k_amon_lanc
		has_faith = faith:lidless_eye

		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_demand_submission_to_dol_guldur
			}
		}
	}

	# Effect
	effect = {
		custom_tooltip = decision_demand_submission_to_dol_guldur.send_message
		every_independent_ruler = {
			limit = {
				NOT = {
					this = ROOT
				}
				primary_title = { kingdom = title:k_amon_lanc }
				faith_is_evil = yes
				culture != culture:wastelands
			}
			trigger_event = {
				id = dol_guldur.0001
			}
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_demand_submission_to_dol_guldur
		}
	}

	# Requirements
	is_valid = {
		is_ruler = yes
		has_faith = faith:lidless_eye
		has_title = title:k_amon_lanc
		NOT = {
			completely_controls = title:k_amon_lanc
		}

		custom_tooltip = {
			text = decision_demand_submission_to_dol_guldur.check_evil_trigger
			any_independent_ruler = {
				NOT = {
					this = ROOT
				}
				primary_title = { kingdom = title:k_amon_lanc }
				faith_is_evil = yes
				culture != culture:wastelands
			}
		}

	}

	# Cost
	cost = {
		prestige = major_prestige_value
		piety = medium_piety_value
	}

	# AI
	ai_check_interval = 12

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}

#######################################################
### 1.5 Dol Guldur Event Chain     			 		###
### Demand Submission of Neighboring Evil Leofring  ###
### Created by Fredsch            			 		###
#######################################################

decision_demand_submission_of_neighboring_evil_leofring = {
	title = decision_demand_submission_of_neighboring_evil_leofring
	desc = decision_demand_submission_of_neighboring_evil_leofring_desc
	confirm_text = decision_demand_submission_of_neighboring_evil_leofring_confirm
	selection_tooltip = decision_demand_submission_of_neighboring_evil_leofring_tooltip
	picture = "gfx/interface/illustrations/decisions/decision_woodmen.dds"
	sort_order = 4
	major = yes

	# Shown
	is_shown = {
		is_landed = yes
		has_title = title:k_amon_lanc
		has_faith = faith:lidless_eye

		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_demand_submission_of_neighboring_evil_leofring
			}
		}
	}

	# Effect
	effect = {
		custom_tooltip = decision_demand_submission_of_neighboring_evil_leofring.send_message
		every_neighboring_and_across_water_top_liege_realm_owner = {
			limit = {
				NOT = {
					this = ROOT
					primary_title = { kingdom = title:k_amon_lanc }
					culture = culture:wastelands
				}
				faith_is_evil = yes
				culture = culture:leofring
			}
			trigger_event = {
				id = dol_guldur.0001
			}
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_demand_submission_of_neighboring_evil_leofring
		}
	}

	# Requirements
	is_valid = {
		is_ruler = yes
		has_faith = faith:lidless_eye
		has_title = title:k_amon_lanc
		completely_controls = title:k_amon_lanc

		custom_tooltip = {
			text = decision_demand_submission_of_neighboring_evil_leofring.check_evil_trigger
			any_neighboring_and_across_water_top_liege_realm_owner = {
				NOT = {
					this = ROOT
					primary_title = { kingdom = title:k_amon_lanc }
					culture = culture:wastelands
				}
				faith_is_evil = yes
				culture = culture:leofring
			}
		}

	}

	# Cost
	cost = {
		prestige = major_prestige_value
		piety = medium_piety_value
	}

	# AI
	ai_check_interval = 12

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}

################################################
### 2. Dol Guldur Event Chain     			 ###
### Purge Lothlorien			             ###
### Created by Fredsch            			 ###
################################################

decision_purge_lothlorien = {
	title = decision_purge_lothlorien
	desc = decision_purge_lothlorien_desc
	confirm_text = decision_purge_lothlorien_confirm
	selection_tooltip = decision_purge_lothlorien_tooltip
	picture = "gfx/interface/illustrations/decisions/decision_woodmen.dds"
	sort_order = 2
	major = yes

	# Shown
	is_shown = {
		is_landed = yes
		has_title = title:k_amon_lanc
		has_faith = faith:lidless_eye

		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_purge_lothlorien
			}
		}
	}

	# Effect
	effect = {
		add_piety = massive_piety_gain

		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_purge_lothlorien
		}
	}

	# Requirements
	is_valid = {
		is_ruler = yes
		has_faith = faith:lidless_eye
		has_title = title:k_amon_lanc

		completely_controls = title:k_amon_lanc

		#k_lothlorien
		completely_controls = title:d_lorien
		completely_controls = title:d_iathglan
	}

	# Cost
	cost = {
		prestige = 200
	}

	# AI
	ai_goal = yes

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 1000
	}
}

################################################
### 2.1 Dol Guldur Event Chain     			 ###
### Purge Lasgalen				             ###
### Created by Fredsch            			 ###
################################################

decision_purge_lasgalen = {
	title = decision_purge_lasgalen
	desc = decision_purge_lasgalen_desc
	confirm_text = decision_purge_lasgalen_confirm
	selection_tooltip = decision_purge_lasgalen_tooltip
	picture = "gfx/interface/illustrations/decisions/decision_woodmen.dds"
	sort_order = 2
	major = yes

	# Shown
	is_shown = {
		is_landed = yes
		has_title = title:k_amon_lanc
		has_faith = faith:lidless_eye

		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_purge_lasgalen
			}
		}
	}

	# Effect
	effect = {
		add_piety = massive_piety_gain

		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_purge_lasgalen
		}
	}

	# Requirements
	is_valid = {
		is_ruler = yes
		has_faith = faith:lidless_eye
		has_title = title:k_amon_lanc

		completely_controls = title:k_amon_lanc

		#k_lasgalen
		completely_controls = title:d_aradhrynd
		completely_controls = title:d_taurduin
		completely_controls = title:d_taur_nu_fuin
	}

	# Cost
	cost = {
		prestige = 200
	}

	# AI
	ai_goal = yes

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 1000
	}
}

################################################
### 4. Dol Guldur Event Chain     			 ###
### Dominion of the Sorcerer	             ###
### Created by Fredsch            			 ###
################################################

decision_dominion_of_the_sorcerer = {
	title = decision_dominion_of_the_sorcerer
	desc = decision_dominion_of_the_sorcerer_desc
	confirm_text = decision_dominion_of_the_sorcerer_confirm
	selection_tooltip = decision_dominion_of_the_sorcerer_tooltip
	picture = "gfx/interface/illustrations/decisions/decision_woodmen.dds"
	sort_order = 1
	major = yes

	# Shown
	is_shown = {
		is_landed = yes
		has_title = title:k_amon_lanc
		has_faith = faith:lidless_eye

		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_dominion_of_the_sorcerer
			}
		}
	}

	# Effect
	effect = {
		# Get new Title
		get_title = title:e_greenwood
		custom_tooltip = decision_dominion_of_the_sorcerer.greenwood_renamed_dominion_of_the_sorcerer
		title:e_greenwood = { 
			set_title_name = e_dominion_of_the_sorcerer 
			set_coa = e_dominion_of_the_sorcerer
			set_color_from_title = title:e_dominion_of_the_sorcerer
			set_capital_county = title:c_amon_lanc
		}

		# Add everything in de jure e_dominion_of_the_sorcerer
		title:d_undeeps = { set_de_jure_liege_title = title:k_amon_lanc }

		title:k_lothlorien = { set_de_jure_liege_title = title:e_greenwood }
		title:k_anduin_vale = { set_de_jure_liege_title = title:e_greenwood }

		# Reset the capital county of the Anduin Vale to c_framsburg
		title:e_anduin_vale = { set_capital_county = title:c_framsburg }

		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_dominion_of_the_sorcerer
		}
	}

	# Requirements
	is_valid = {
		is_ruler = yes
		has_faith = faith:lidless_eye

		# Needed titles
		has_title = title:k_amon_lanc
		has_title = title:k_lothlorien
		has_title = title:k_lasgalen

		# k_amon_lanc
		completely_controls = title:k_amon_lanc
		# completely_controls = title:d_amon_lanc
		# completely_controls = title:d_gwath_anglennol
		# completely_controls = title:d_taur_e_ndaedlos

		#k_angaladh
		completely_controls = title:k_angaladh
		# completely_controls = title:d_angaladh_rhunen
		# completely_controls = title:d_men_i_naugrim
		# completely_controls = title:d_dundaedelu

		#k_lasgalen
		completely_controls = title:d_aradhrynd
		completely_controls = title:d_taurduin
		completely_controls = title:d_taur_nu_fuin

		#k_brownlands
		completely_controls = title:d_undeeps

		#k_lothlorien
		completely_controls = title:d_lorien
		completely_controls = title:d_iathglan

		#k_anduin_vale
		completely_controls = title:k_anduin_vale
		# completely_controls = title:d_drownholt
		# completely_controls = title:d_warnelath
		# completely_controls = title:d_west_bight
		# completely_controls = title:d_carrock_vale
	}

	# Cost
	cost = {
		prestige = 10000
	}

	# AI
	ai_goal = yes

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 1000
	}
}