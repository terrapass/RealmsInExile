### Dol Guldur ###
namespace = dol_guldur

dol_guldur.0001 = {
	type = letter_event
	sender = scope:sender

	opening = {
		desc = dol_guldur.0001.opening
	}

	desc = dol_guldur.0001.desc

	on_trigger_fail = { #Trigger invitation again if it was blocked because the character was handling another invitation
		trigger_event = {
			id = dol_guldur.0001
			days = 1
		}
	}

	immediate = {
		title:k_amon_lanc.holder = {
			save_scope_as = sender
		}
	}

	# Join
	option = {
		name = dol_guldur.0001.a
		add_piety = major_piety_gain
		
		create_title_and_vassal_change = {
			type = swear_fealty
			save_scope_as = change
			add_claim_on_loss = no
		}

		change_liege = {
			liege = scope:sender
			change = scope:change
		}
		
		resolve_title_and_vassal_change = scope:change

		ai_chance = {
			base = 0
			opinion_modifier = {
				opinion_target = scope:sender
				multiplier = 1
			}
			modifier = {
				add = {
					value = root.ai_boldness
					multiply = -1
				}
			}
			modifier = {
				add = {
					value = root.ai_rationality
					multiply = 1
				}
			}
		}
	}
	
	# Refuse
	option = {
		name = dol_guldur.0001.b

		title:k_amon_lanc.holder = {
			add_unpressed_claim = root.primary_title
		}
		
		ai_chance = {
			base = 0
			opinion_modifier = {
				opinion_target = scope:sender
				multiplier = -1
			}
			modifier = {
				add = {
					value = root.ai_boldness
					multiply = 1
				}
			}
			modifier = {
				add = {
					value = root.ai_rationality
					multiply = -1
				}
			}
		}
	}

}