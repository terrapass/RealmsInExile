namespace = umbar

# Ar-Adunaim Events
#			umbar.0100 #Ar-Adûnâim introduction



### Ar-Adûnâim Events ###

umbar.0100 = { # Introduction to the Ar-Adunaim
	title = umbar.0100.t
	desc = umbar.0100.desc
	theme = stewardship_duty_focus
	left_portrait = {
		character = root
		animation = anger
	}
	
	option = { #
		name = umbar.0100.a
		custom_tooltip = umbar.0100.a.tt
		spawn_army = {		  # "Numenorean" Honor Guard
			uses_supply = no
			inheritable = yes
			name = ar_ardunaim_event_troops
			men_at_arms = {
				type = numenorean_knights
				stacks = 2
			}
			men_at_arms = {
				type = numenorean_soldiers
				stacks = 1
			}
			men_at_arms = {
				type = numenorean_archers
				stacks = 1
			}
			location = capital_province
		}
	}
}

umbar.0200 = { # Introduction to Umbar
	title = umbar.0200.t
	desc = umbar.0200.desc
	theme = stewardship_duty_focus
	left_portrait = {
		character = root
		animation = personality_cynical
	}
	option = {
		name = umbar.0200.a
		custom_tooltip = umbar.0200.a.tt
	}
}

umbar.1000 = {
	type = character_event
	title = umbar.1000.t
	desc = umbar.1000.desc
	theme = war
	left_portrait = {
		character = root
		animation = anger
	}
	immediate = {
		play_music_cue = "mx_cue_combat_2"
		}
	option = {
		name = umbar.1000.a
		if = {
			limit = { exists = title:e_gondor_steward }
				start_war = {
					casus_belli = castamir_claim_cb
					target = title:e_gondor_steward.holder
					target_title = title:e_gondor_steward
					}
				}
		else_if = {
			limit = { exists = title:e_gondor }
				start_war = {
					casus_belli = castamir_claim_cb
					target = title:e_gondor.holder
					target_title = title:e_gondor
					}
				}
			}
}
umbar.1001 = {	
	type = character_event
	title = umbar.1001.t
	desc = umbar.1001.desc
	theme = stewardship_duty_focus
	left_portrait = {
		character = root
		animation = personality_rational
	}
	
	option = {
		name = umbar.1001.a #The Castamiri become the Kings of Gondor
		create_title_and_vassal_change = {
			type = created
			save_scope_as = change
			add_claim_on_loss = no
		}
		title:e_castamir = {
			change_title_holder = {
				holder = root
				change = scope:change
			}
		}
		title:e_gondor_steward = {
			transfer_vassals = title:e_castamir
		}
		title:e_gondor = {
			transfer_vassals = title:e_castamir
		}
		title:e_gondor_steward = {
			every_in_de_jure_hierarchy = {
				limit = { tier = tier_kingdom }
				set_de_jure_liege_title = title:e_castamir
			}
		}
		title:e_gondor = {
			every_in_de_jure_hierarchy = {
				limit = { tier = tier_kingdom }
				set_de_jure_liege_title = title:e_castamir
			}
		}
		title:e_umbar = {
			every_in_de_jure_hierarchy = {
				limit = { tier = tier_kingdom }
				set_de_jure_liege_title = title:e_castamir
			}
		}
		resolve_title_and_vassal_change = scope:change
		destroy_title = title:e_umbar
		destroy_title = title:e_gondor_steward
		destroy_title = title:e_gondor
		}
	option = {
		name = umbar.1001.b
		create_title_and_vassal_change = {
			type = created
			save_scope_as = change
			add_claim_on_loss = no
		}
		title:e_gondor_steward = {
			transfer_vassals = title:e_umbar
		}
		title:e_gondor = {
			transfer_vassals = title:e_umbar
		}
		title:e_gondor_steward = {
			every_in_de_jure_hierarchy = {
				limit = { tier = tier_kingdom }
				set_de_jure_liege_title = title:e_umbar
			}
		}
		title:e_gondor = {
			every_in_de_jure_hierarchy = {
				limit = { tier = tier_kingdom }
				set_de_jure_liege_title = title:e_umbar
			}
		}
		resolve_title_and_vassal_change = scope:change
		destroy_title = title:e_gondor_steward
		destroy_title = title:e_gondor
	}
}

umbar.1002 = {
	type = character_event
	title = umbar.1002.t
	desc = umbar.1002.desc
	theme = war
	left_portrait = {
		character = root
		animation = worry
	}
	right_portrait = {
		character = title:e_umbar.holder
		animation = anger
		}
	option = {
		name = umbar.1002.a
		}
}
