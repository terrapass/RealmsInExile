namespace = bellakar

# Introductory Events
#		bellakar.0100-101	The King of Bellakar, Nîlûhîn II
#		bellakar.0120		First Lord of Felaya
#	

bellakar.0100 = { # Introduction to Nîlûhîn II
	title = bellakar.0100.t
	desc = bellakar.0100.desc
	theme = stewardship_duty_focus
	override_background = { reference = bp1_courtyard_indian }
	left_portrait = {
		character = root
		animation = personality_bold
	}

	option = { # The Eighth Entail Stands
		name = bellakar.0100.a
		trigger_event = {
			id = bellakar.0101
			years = 3
		}
	}
}

bellakar.0101 = { # Premonition of the North
	title = bellakar.0101.t
	desc = bellakar.0101.desc
	theme = hunting
	override_background = { reference = trollshaws }
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = character:lineisildur42 
		animation = personality_honorable
	}

	option = { # From the North comes the line of the Kings?
		name = bellakar.0101.a
		trigger_event = {
			id = bellakar.0102
			months = 6
		}
	}
}

bellakar.0102 = { # North or South?
	title = bellakar.0102.t
	desc = bellakar.0102.desc
	theme = stewardship_duty_focus
	override_background = { reference = bp1_courtyard_indian }
	left_portrait = {
		character = root
		animation = stress
	}
	option = { # The true battle is in the north...
		name = bellakar.0102.a
		add_character_modifier = { modifier = northernfocus years = 25 }
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 30
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 40
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	option = { # We much look to our own lands first, and build up our defenses
		name = bellakar.0102.b
		add_character_modifier = { modifier = southernfocus years = 25 }
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 60
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
}

# bellakar.0200 = { # First event in Uniting Faithful realms chain - bellakar side
# 	title = bellakar.0200.t
# 	desc = bellakar.0200.desc
# 	theme = stewardship_duty_focus

# 	override_background = {
# 		reference = bp1_courtyard_indian
# 	}

# 	left_portrait = {
# 		character = root
# 		animation = stress
# 	}

# 	trigger = {
# 		#####
# 		#	Another trigger here for if bellakar/Gondor in special alliance
# 		#####
# 		AND = {
# 			is_target_in_global_variable_list = { # Gondor has reclaimed Harondor
# 				name = unavailable_unique_decisions
# 				target = flag:reclaim_harondor_decision
# 			}
# 			is_target_in_global_variable_list = { # Gondor has reclaimed Umbar
# 				name = unavailable_unique_decisions
# 				target = flag:reclaim_umbar_decision
# 			}
# 			# is_target_in_global_variable_list = { # Commeted out as currently destroy mordor isn't working.
# 			# 	name = unavailable_unique_decisions
# 			# 	target = flag:decision_destroy_mordor
# 			# }
# 		}
# 	}

# 	option = {
# 		name = bellakar.0200.a
# 	}
# }

# bellakar.0201 = { # bellakar gets choice to unite with Gondor as a vassal
# 	title = bellakar.0201.t
# 	desc = bellakar.0201.desc
# 	theme = stewardship_duty_focus

# 	override_background = {
# 		reference = bp1_courtyard_indian
# 	}

# 	left_portrait = {
# 		character = root
# 		animation = stress
# 	}

# 	option = {
# 		name = bellakar.0201.a
# 	}

# 	option = {
# 		name = bellakar.0201.b
# 	}
# }

# bellakar.0202 = { # Felaya is independent and also wants a choice
# 	title = bellakar.0202.t
# 	desc = bellakar.0202.desc
# 	theme = stewardship_duty_focus

# 	override_background = {
# 		reference = bp1_courtyard_indian
# 	}

# 	left_portrait = {
# 		character = root
# 		animation = stress
# 	}

# 	immediate = { # Added this here to check whether felaya was independent in later events
# 		add_to_global_variable_list = {
# 			name = unavailable_unique_decisions
# 			target = flag:felaya_faithful_realms
# 		}
# 	}

# 	option = {
# 		name = bellakar.0202.a
# 	}

# 	option = {
# 		name = bellakar.0202.b
# 	}
# }

bellakar.0250 = { # Bellakar accepts alliance offer
	title = bellakar.0250.t
	desc = bellakar.0250.desc
	theme = stewardship_duty_focus

	override_background = { reference = bp1_courtyard_indian }

	left_portrait = {
		character = root
		animation = personality_honorable
	}

	right_portrait = {
		character = scope:high_king_of_bellakar
		animation = personality_content
	}

	immediate = { title:e_bellakar.holder = { save_scope_as = high_king_of_bellakar } }

	option = {
		name = bellakar.0250.a

		add_character_flag = bellakar_x_gondor_alliance
		scope:high_king_of_bellakar = { add_character_flag = bellakar_x_gondor_alliance }

		create_alliance = {
			target = scope:high_king_of_bellakar
			allied_through_owner = root
			allied_through_target = scope:high_king_of_bellakar
		}

		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:recurring_bellakar_gondor_alliance
		}
		if = { # Message to Bellakar that Gondor accepts the alliance
			limit = {
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:bellakar_x_gondor
				}
			}
			title:e_bellakar.holder = {
				trigger_event = {
					id = gondor.2952
					days = { 15 30 }
				}
			}
		}

		ai_chance = {
			base = 100
		}
	}
}

bellakar.0251 = { # Bellakar declines alliance offer
	title = bellakar.0251.t
	desc = bellakar.0251.desc
	theme = stewardship_duty_focus

	override_background = { reference = bp1_courtyard_indian }

	left_portrait = {
		character = root
		animation = stress
	}

	immediate = { title:e_bellakar.holder = { save_scope_as = high_king_of_gondor } }

	option = {
		name = bellakar.0251.a

		ai_chance = {
			base = 100
		}
	}
}

bellakar.0252 = { # Gondor recieves message about MAKING an alliance with Bellakar
	title = bellakar.0252.t
	desc = bellakar.0252.desc
	theme = stewardship_duty_focus

	override_background = { reference = bp1_courtyard_indian }

	left_portrait = {
		character = root
		animation = stress
	}

	right_portrait = {
		character = scope:high_king_of_bellakar
		animation = stress
	}

	immediate = { title:e_bellakar.holder = { save_scope_as = high_king_of_bellakar } }

	option = { # yes, make an alliance
		name = bellakar.0252.a

		add_character_flag = bellakar_x_gondor_alliance
		scope:high_king_of_bellakar = { add_character_flag = bellakar_x_gondor_alliance }

		create_alliance = {
			target = scope:high_king_of_bellakar
			allied_through_owner = root
			allied_through_target = scope:high_king_of_bellakar
		}

		scope:high_king_of_bellakar = { 
			trigger_event = {
				id = gondor.2952
				days = { 15 30 }
			}
		}

		ai_chance = {
			base = 100
		}
	}

	option = { # no, lets NOT make an alliance
		name = bellakar.0252.b

		scope:high_king_of_bellakar = { 
			trigger_event = {
				id = gondor.2953
				days = { 15 30 }
			}
		}

		ai_chance = {
			base = 0
		}
	}
}

bellakar.0253 = { # Bellekar received message that Gondor ruler died, renew alliance
	title = bellakar.0253.t
	desc = bellakar.0253.desc
	theme = stewardship_duty_focus
	orphan = no # Referenced in on_title_gain

	override_background = { reference = bp1_courtyard_indian }

	left_portrait = {
		character = root
		animation = stress
	}

	right_portrait = {
		character = title:e_gondor.holder
		animation = stress
	}

	immediate = {
		title:e_gondor.holder = { save_scope_as = high_king_of_gondor }
		scope:high_king_of_gondor = { add_character_flag = bellakar_x_gondor_alliance }
	}

	option = { # yes, renew alliance
		name = bellakar.0253.a

		create_alliance = {
			target = scope:high_king_of_gondor
			allied_through_owner = root
			allied_through_target = scope:high_king_of_gondor
		}

		ai_chance = {
			base = 100
		}
	}

	option = { # no, lets NOT renew alliance
		name = bellakar.0253.b

		ai_chance = {
			base = 0
		}
	}
}