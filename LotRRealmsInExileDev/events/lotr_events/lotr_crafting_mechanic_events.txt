namespace = crafting_mechanic

crafting_mechanic.0001 = {
	hidden = yes
	immediate = {
		create_dummy_artifact = yes
		show_as_tooltip = { # use show_as_tooltip so it doesn't use toast to indicate that player lost artifact (TLDR: makes dummy artifact transfer silent) 
			scope:custom_artifact = { set_owner = character:k_wastelands_holder }
		}
		start_editing_custom_artifact = { ARTIFACT_NUM = 0 }
	}
}

crafting_mechanic.0002 = {
	title = crafting_mechanic.0002.t
	desc = {}
	theme = learning
	immediate = {
		root = { save_temporary_scope_as = smith }
		if = {
			limit = {
				NOT = {
					exists = var:editing_custom_artifact
				}
			}
			start_editing_custom_artifact = { ARTIFACT_NUM = 0 } # Dummy
		}
	}
	widgets = {
		# Name and Title
		widget = {
			gui = "lotr_crafting_mechanic_name_widget"
			container = "custom_widgets_container"
			setup_scope = { save_scope_as = text_target }
			controller = {
				type = text
				data = { key = custom_artifact_name default = default_artifact_name }
			}
		}
		widget = {
			gui = "lotr_crafting_mechanic_description_widget"
			container = "custom_widgets_container"
			setup_scope = { save_scope_as = text_target }
			controller = {
				type = text
				data = { key = custom_artifact_desc default = default_artifact_desc }
			}
		}
	}
    option = {
        name = crafting_mechanic.0002.a
		remove_variable = editing_custom_artifact
    }
	after = {
		character:k_wastelands_holder = { refresh_custom_artifact = yes }
	}
}