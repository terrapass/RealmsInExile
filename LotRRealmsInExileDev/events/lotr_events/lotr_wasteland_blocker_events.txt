#########################################
# COLONISATION BLOCKER CLEARANCE EVENTS #
#########################################

###############
## Wolf Den
# wasteland_blocker.0001 — Clearing out the Wolves



namespace = wasteland_blocker

## Wolf Den
wasteland_blocker.0001 = { # Clearing out the Wolves
	type = character_event
	title = wasteland_blocker.0001.t
	desc = wasteland_blocker.0001.desc
	theme = hunting

	left_portrait = {
		character = root
		animation = personality_bold
	}
	
	right_portrait = {
		character = scope:knight
		animation = war_defender
	}
	
	lower_center_portrait = {
		character = scope:hooked_character
	}

	immediate = {
		if = {
			limit = { 
				any_knight = { 
					is_ai = yes
					count > 0
				}
			}
			ordered_knight = {
				limit = { is_ai = yes }
				order_by = prowess
				save_scope_as = knight
			}
		}
		if = {
			limit = { 
				any_hooked_character = { 
					is_ai = yes
					count > 0
				}
			}
			ordered_hooked_character = {
				limit = { is_ai = yes }
				order_by = prowess
				save_scope_as = hooked_character
			}
		}
	}

	option = { # Take them on myself
		name = wasteland_blocker.0001.a
		skill = prowess
		duel = {
			skill = prowess 
			value = 10
			30 = { 
				compare_modifier = {
					value = scope:duel_value
					multiplier = 2
					min = -10
				}
				desc = wasteland_blocker.0001.a.duel_success
				send_interface_toast = {
					left_icon = root
					add_prestige = 100
					title = wasteland_blocker.0001.success.toast.t
					scope:obstacle_province = { remove_building = wolf_den_cleared }
				}
			}
			30 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -2
					min = -25
				}
				desc = wasteland_blocker.0001.a.duel_failure
				send_interface_toast = {
					left_icon = root
					title = wasteland_blocker.0001.failure.toast.t
					add_prestige = -150
					increase_wounds_effect = { REASON = hunting_accident }
					hidden_effect = { scope:obstacle_province = { remove_building = wolf_den_cleared } }
					scope:obstacle_province = { add_building = wolf_den }
				}
			}
		}
	}
	
	option = { # Send a skilled knight
		name = wasteland_blocker.0001.b
		trigger = { 
			any_knight = { 
				is_ai = yes
				count > 0
			} 
		}
		scope:knight = {
			duel = {
				skill = prowess 
				value = 10
				30 = { 
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = wasteland_blocker.0001.b.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:knight
							scope:knight = { add_prestige = 100 }
							title = wasteland_blocker.0001.success.toast.t
							scope:obstacle_province = { remove_building = wolf_den_cleared }
						}
					}
				}
				30 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = wasteland_blocker.0001.b.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:knight
							title = wasteland_blocker.0001.failure.toast.t
							scope:knight = { add_prestige = -150 }
							increase_wounds_effect = { REASON = hunting_accident }
							hidden_effect = { scope:obstacle_province = { remove_building = wolf_den_cleared } }
							scope:obstacle_province = { add_building = wolf_den }
						}
					}
				}
			}
		}
	}
	
	option = { # Send a hooked character
		name = wasteland_blocker.0001.c
		trigger = { 
			any_hooked_character = { 
				is_ai = yes
				count > 0
			}
		}
		use_hook = scope:hooked_character
		scope:hooked_character = {
			duel = {
				skill = prowess 
				value = 10
				30 = { 
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = wasteland_blocker.0001.c.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:hooked_character
							scope:hooked_character = { add_prestige = 100 }
							title = wasteland_blocker.0001.success.toast.t
							scope:obstacle_province = { remove_building = wolf_den_cleared }
						}
					}
				}
				30 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = wasteland_blocker.0001.c.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:hooked_character
							title = wasteland_blocker.0001.failure.toast.t
							scope:hooked_character = { add_prestige = -150 }
							increase_wounds_effect = { REASON = hunting_accident }
							hidden_effect = { scope:obstacle_province = { remove_building = wolf_den_cleared } }
							scope:obstacle_province = { add_building = wolf_den }
						}
					}
				}
			}
		}
	}
	
	option = { # Hire skilled mercenaries
		name = wasteland_blocker.0001.d
		remove_short_term_gold = 100
		random_list = { 
			85 = {
				send_interface_toast = {
					left_icon = root
					title = wasteland_blocker.0001.success.toast.t
					scope:obstacle_province = { remove_building = wolf_den_cleared }
				}
			}
			15 = {
				send_interface_toast = {
					left_icon = root
					title = wasteland_blocker.0001.failure.toast.t
					hidden_effect = { scope:obstacle_province = { remove_building = wolf_den_cleared } }
					scope:obstacle_province = { add_building = wolf_den }
				}
			}
		}
	}
	
	option = { # Leave the wolves alone
		name = wasteland_blocker.0001.e
		hidden_effect = { scope:obstacle_province = { remove_building = wolf_den_cleared } }
		scope:obstacle_province = { add_building = wolf_den }
	}
}

## Bear Den
wasteland_blocker.0011 = { # Yoh-gi
	type = character_event
	title = wasteland_blocker.0011.t
	desc = wasteland_blocker.0011.desc
	theme = hunting

	left_portrait = {
		character = root
		animation = personality_bold
	}
	
	option = { # Dispatch the ranger expedition
		name = wasteland_blocker.0011.a
		trigger = {
			martial >= prowess
		}
		skill = martial
		duel = {
			skill = martial 
			value = 10
			30 = { 
				compare_modifier = {
					value = scope:duel_value
					multiplier = 2
					min = -10
				}
				desc = wasteland_blocker.0011.a.duel_success
				send_interface_toast = {
					left_icon = root
					title = wasteland_blocker.0011.success.toast.t
					scope:obstacle_province = { remove_building = bear_den_cleared }
				}
			}
			30 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -2
					min = -25
				}
				desc = wasteland_blocker.0011.a.duel_failure
				send_interface_toast = {
					left_icon = root
					title = wasteland_blocker.0011.failure.toast.t
					hidden_effect = { scope:obstacle_province = { remove_building = bear_den_cleared } }
					scope:obstacle_province = { add_building = bear_den }
				}
			}
		}
	}

	option = { # Dispatch the bear personally
		name = wasteland_blocker.0011.c
		trigger = {
			martial < prowess
		}
		skill = prowess
		duel = {
			skill = prowess 
			value = 10
			30 = { 
				compare_modifier = {
					value = scope:duel_value
					multiplier = 2
					min = -10
				}
				desc = wasteland_blocker.0011.c.duel_success
				send_interface_toast = {
					left_icon = root
					add_prestige = 100
					title = wasteland_blocker.0011.success.toast.t
					scope:obstacle_province = { remove_building = bear_den_cleared }
				}
			}
			30 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -2
					min = -25
				}
				desc = wasteland_blocker.0011.c.duel_failure
				send_interface_toast = {
					left_icon = root
					title = wasteland_blocker.0011.failure.toast.t
					add_prestige = -50
					increase_wounds_effect = { REASON = hunting_accident }
					hidden_effect = { scope:obstacle_province = { remove_building = bear_den_cleared } }
					scope:obstacle_province = { add_building = bear_den }
				}
			}
		}
	}	
			
	option = { # Pay the smith to build his trap
		name = wasteland_blocker.0011.b
		remove_short_term_gold = 50
		random_list = { 
			70 = {
				send_interface_toast = {
					left_icon = root
					title = wasteland_blocker.0011.success.toast.t
					scope:obstacle_province = { remove_building = bear_den_cleared }
				}
			}
			30 = {
				send_interface_toast = {
					left_icon = root
					title = wasteland_blocker.0011.failure.toast.t
					hidden_effect = { scope:obstacle_province = { remove_building = bear_den_cleared } }
					scope:obstacle_province = { add_building = bear_den }
				}
			}
		}
	}

	option = { # Leave the wolves alone
		name = wasteland_blocker.0011.d
		hidden_effect = { scope:obstacle_province = { remove_building = bear_den_cleared } }
		scope:obstacle_province = { add_building = bear_den }
	}
}

wasteland_blocker.0012 = { # Beargild
	type = character_event
	title = wasteland_blocker.0012.t
	desc = {
		desc = wasteland_blocker.0012.desc.1
		triggered_desc = { # Evil response to bear cub
			trigger = { 
				faith_is_evil = yes
			} 
			desc = wasteland_blocker.0012.desc.2.evil
		}
		triggered_desc = { # Non-evil response to bear cub
			trigger = { 
				faith_is_evil = no
			} 
			desc = wasteland_blocker.0012.desc.2.good
		}
	}
	theme = hunting

	left_portrait = {
		character = root
		animation = sadness
	}
	
	option = { # I must put it out of its misery
		name = wasteland_blocker.0012.a
		scope:obstacle_province = { remove_building = bear_den_cleared }
		if = {
			limit = {
				OR = {
					faith_is_good = yes
					faith = { has_doctrine = tenet_sanctity_of_nature }
				}
			}
			add_piety = -100
			add_stress = 50
		}
		else = {
			add_stress = -30
		}
	}
			
	option = { # Try to raise the cub
		name = wasteland_blocker.0012.b
		scope:obstacle_province = { remove_building = bear_den_cleared }
		remove_short_term_gold = 75
		random_list = { 
			10 = {
				send_interface_toast = {
					left_icon = root
					title = wasteland_blocker.0012.b.success.toast.t
					add_character_modifier = {
						modifier = pet_bear_modifier
						years = 18
					}
				}
			}
			90 = {
				send_interface_toast = {
					left_icon = root
					title = wasteland_blocker.0012.b.failure.toast.t
				}
			}
		}
	}

	option = { # Leave the cub to fend for itself
		name = wasteland_blocker.0012.c
		hidden_effect = { scope:obstacle_province = { remove_building = bear_den_cleared } }
		scope:obstacle_province = { add_building = bear_den }
		if = {
			limit = {
				OR = {
					faith_is_good = yes
					faith = { has_doctrine = tenet_sanctity_of_nature }
				}
			}
			add_piety = 100
			add_stress = -50
		}
		else = {
			add_stress = 30
		}
	}
}