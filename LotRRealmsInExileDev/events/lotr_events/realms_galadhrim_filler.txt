namespace = realms_galadhrim_filler

##########################################
# Strange markings
##########################################

realms_galadhrim_filler.100 = { # Your border sentries bring forth grim news. Strange painting have been witnessed in certain Mallorn trees on the outskirts of Lothlórien - laying on the tree's trunk, was burned a black eye with a red lid. 
	type = character_event
	title = realms_galadhrim_filler.100
	desc = realms_galadhrim_filler.100.desc
	theme = realm
	# override_background = {
	# 	event_background = throne_room_galadhrim
	# }

	left_portrait = {
		character = root
		animation = worry
	}

	right_portrait = {
		character = cp:councillor_marshal
		animation = worry
	}

	trigger = { 
		location = { 
			geographical_region = middleearth_west_lothlorien 
		}
		is_imprisoned = no
		is_incapable = no
		is_in_an_activity = no
		NOT = {
			has_character_flag = strange_marks_trees_filler
		}
	}

	immediate = {	
		add_character_flag = strange_marks_trees_filler
	}

	option = {	# Could anyone witness the deed? Whoever is behind this shall be found and punished.
		name = realms_galadhrim_filler.1001
		custom_tooltip = realms_galadhrim_filler.1001_tt
		if = {
			limit = {
				has_trait = paranoid
			}
			add_stress = 40
		}
		else = {
			add_stress = 10
			trigger_event = {
				id = realms_galadhrim_filler.101
				days = 14
			}
		}
	}

	option = {	# Increase guard near all Mallorn trees, we shall ambush them near the glade's outskirts.
		name = realms_galadhrim_filler.1002
		custom_tooltip = realms_galadhrim_filler.1002_tt
		trigger = {
			has_trait = brave
		}
		trigger_event = {
			id = realms_galadhrim_filler.102
			days = 7
		}
	}

	option = {	# Probably just some roaming bands of Orcs. Do not bother me with this nonsense. 
		name = realms_galadhrim_filler.1003
		custom_tooltip = realms_galadhrim_filler.1003_tt
		trigger_event = {
			id = realms_galadhrim_filler.103
			months = 2
		}
	}
}

##########################################
# Strange markings - Joined watch
##########################################

realms_galadhrim_filler.101 = { # You have joined your men in their watch tonight. Fate has decried that a guard post has fallen under attack a short distance away - the enemy has made their move, it is up to the Galadhrim to defend their homeland.
	type = character_event
	title = realms_galadhrim_filler.101
	desc = realms_galadhrim_filler.101.desc
	theme = realm
	override_background = {     
      event_background = wilderness_forest
	}

	left_portrait = {
		character = root
		animation = war_defender
	}

	right_portrait = {
		character = cp:councillor_marshal
		animation = war_defender
	}

	option = {	# To arms, Galadhrim! Dagor-na im ammen!  
		name = realms_galadhrim_filler.1011
		custom_tooltip = realms_galadhrim_filler.1011_tt
		trigger = {
			NOT = {
				has_trait = craven
			}
		}
		if = {
			limit = {
				has_trait = brave
			}
			add_prestige = 150
			dynasty = {add_dynasty_prestige = 100}
		}
		else = {
			add_trait = brave
			# add_trait = inspiring_leader
		}
		trigger_event = {
			id = realms_galadhrim_filler.104
		}
	}

	option = {	# I am not going there...
		name = realms_galadhrim_filler.1012
		custom_tooltip = realms_galadhrim_filler.1012_tt
		if = {
			limit = {
				has_trait = craven
			}
			add_prestige = -100
		}
		else = {
			add_trait = craven
		}
		trigger_event = {
			id = realms_galadhrim_filler.103
			days = 10
		}
	}
}

##########################################
# Strange markings - Ambushed orcs
##########################################

realms_galadhrim_filler.102 = { # The Galadhrim caught the enemy off guard. As arrows fly from the tall trees, their archers' aim true, the clang of unsheath blades fills the air, and you and your brothers plunge into the Orc ranks - you are noticed by a champion.
	type = character_event
	title = realms_galadhrim_filler.102
	desc = realms_galadhrim_filler.102.desc
	theme = realm
	override_background = {     
      event_background = wilderness_forest
	}

	left_portrait = {
		character = root
		animation = war_attacker
	}

	right_portrait = {
		character = scope:orc_1
		animation = war_defender
	}

	immediate = {
		create_character = {
			save_scope_as = orc_1
			name = Uzbûk
			age = { 18 40 }
			gender = male
			# gender_female_chance = 0
			trait = sadistic
			random_traits_list = { 
				count = 1 
				blademaster_1 = { weight = { base = 80 } } 
				blademaster_2 = { weight = { base = 30 } } 
				blademaster_3 = { weight = { base = 10 } } 
			}
			random_traits = yes
			location = root.location
			faith = faith:lidless_eye
			# random_faith_in_religion = religion:
			culture = culture:orc
			dynasty = none
		}
	}

	option = {	# May the shadows engulf you, fiend of Gorthaur!
		name = realms_galadhrim_filler.1021
		custom_tooltip = realms_galadhrim_filler.1021_tt
		configure_start_single_combat_effect = {
			SC_INITIATOR = root
			SC_ATTACKER = root
			SC_DEFENDER = scope:orc_1
			FATALITY = yes
			FIXED = no
			LOCALE = terrain_scope
			OUTPUT_EVENT = realms_galadhrim_filler.105
			INVALIDATION_EVENT = realms_galadhrim_filler.107 #TODO last event in queue
		}
	}
}

##########################################
# Strange markings - disaster
##########################################

realms_galadhrim_filler.103 = { # Dark have been your people's days as of late. A firey swathe has destroyed a large portion of your sacred trees, forever lost to the flame's hunger. The culprits are nowhere to be found.
	type = character_event
	title = realms_galadhrim_filler.103
	desc = realms_galadhrim_filler.103.desc
	theme = realm
	# override_background = {     
    #   event_background = throne_room_galadhrim
	# }

	left_portrait = {
		character = root
		animation = dismissal
	}

	right_portrait = {
		character = cp:councillor_chancellor  #TODO use court bishop
		animation = anger
	}

	option = {	# They shall grow back anyway.. 
		name = realms_galadhrim_filler.1031
		custom_tooltip = realms_galadhrim_filler.1031_tt
		add_character_modifier = let_forest_burn_filler_modifier
		add_prestige = -200
	}
}

##########################################
# Strange markings - relief attempt
##########################################

realms_galadhrim_filler.104 = { # As you arrive into the scene, your people are clashing against the invaders, a brutal melee rages in the glades.
	type = character_event
	title = realms_galadhrim_filler.104
	desc = realms_galadhrim_filler.104.desc
	theme = realm
	override_background = {     
      event_background = wilderness_forest
	}

	left_portrait = {
		character = root
		animation = war_attacker
	}

	right_portrait = {
		character = cp:councillor_marshal
		animation = war_defender
	}

	option = {	# Attack! Let none of these monsters leave the forest!
		name = realms_galadhrim_filler.1041
		custom_tooltip = realms_galadhrim_filler.1041_tt
		trigger_event = {
			id = realms_galadhrim_filler.102 
		}
	}
}

##########################################
# Strange markings - Captain duel
##########################################

realms_galadhrim_filler.105 = { # As your enemy falls under your might, another one steps into the fray. A quick glance lets you notice the tide is turning in your favor, but first you need to fell yet another foe. "Akzshââk is my name" cries, announcing himself as the leader of these raiders. "When you soon lie dead at my feet, feel shame in knowing I will eat your mongrels. I will burn your forest to the ground, for the glory of Sauron."
	type = character_event
	title = realms_galadhrim_filler.105
	desc = realms_galadhrim_filler.105.desc
	theme = realm
	override_background = {     
      event_background = wilderness_forest
	}

	left_portrait = {
		character = root
		animation = war_defender
	}

	right_portrait = {
		character = scope:orc_leader
		animation = war_attacker
	}

	immediate = {
		add_character_flag = killed_first_champion_filler
		create_character = {
			save_scope_as = orc_leader
			name = Akzshââk
			age = { 18 40 }
			gender = male
			gender_female_chance = 0
			trait = sadistic
			trait = zealous			
			random_traits_list = { 
				count = 1 
				blademaster_1 = { weight = { base = 80 } } 
				blademaster_2 = { weight = { base = 50 } } 
				blademaster_3 = { weight = { base = 30 } } 
			}
			random_traits = yes
			location = root.location
			faith = faith:lidless_eye
			culture = culture:orc
			dynasty = none
			after_creation = {
				scope:orc_leader = {
					give_nickname = nickname_the_defiler
				}
			} 
		}
	}

	option = {	# If your kind truly hail from the depths of Morgoth's evil, when you return there, tell your kindred it was $PLAYER_NAME$ who threw you back!
		name = realms_galadhrim_filler.1051
		custom_tooltip = realms_galadhrim_filler.1051_tt
		configure_start_single_combat_effect = {
			SC_INITIATOR = scope:orc_leader
			SC_ATTACKER = scope:orc_leader
			SC_DEFENDER = root
			FATALITY = yes
			FIXED = no
			LOCALE = terrain_scope
			OUTPUT_EVENT = realms_galadhrim_filler.106
			INVALIDATION_EVENT = realms_galadhrim_filler.107 #TODO last event in queue
		}
	}
}

##########################################
# Strange markings - battle end
##########################################

realms_galadhrim_filler.106 = { # It's over. The orc marauder lies lifeless at your feet, his warband scattered, falling one by one to your archers' perfectly aimed arrows. 
	type = character_event
	title = realms_galadhrim_filler.106
	desc = realms_galadhrim_filler.106.desc
	theme = realm
	# override_background = {     
    #     event_background = throne_room_galadhrim
	# }

	left_portrait = {
		character = root
		animation = war_over_win
	}

	right_portrait = {
		character = cp:councillor_marshal
		animation = war_over_win
	}

	option = {	# Taug Lothlórien hi aur!
		name = realms_galadhrim_filler.1061
		custom_tooltip = realms_galadhrim_filler.1061_tt
		give_nickname = nickname_the_bulwark_of_the_glades
		root.dynasty = {
			add_dynasty_prestige_level = 1
		}
	}
}

##########################################
# Strange markings - defeat
##########################################

realms_galadhrim_filler.107 = { # You can hear your companions' woe screams around you... your $marshall name$ rushes towards you, as you fall to your knees.. All goes dark..
	type = character_event
	title = realms_galadhrim_filler.107
	desc = realms_galadhrim_filler.107.desc
	theme = realm
	override_background = {     
      event_background = battlefield
	}

	left_portrait = {
		character = root
		animation = severelyinjured
	}

	right_portrait = {
		character = cp:councillor_marshal
		animation = severelyinjured
	}

	immediate = {
		if = {
			limit = {
				has_character_flag = killed_first_champion_filler
			}
			cp:councillor_marshal = {
				death = { 
					killer = scope:orc_leader
					death_reason = death_duel
				}
			}
		}
		else = {
			cp:councillor_marshal = {
				death = { 
					killer = scope:orc_1
					death_reason = death_duel
				}
			}
		}
	}

	option = {	# I see.. a grey, cloudy curtain... it's rolling back...
		name = realms_galadhrim_filler.1071
		custom_tooltip = realms_galadhrim_filler.1071_tt
		if = {
			limit = {
				has_character_flag = killed_first_champion_filler
			}
			death = { 
				killer = scope:orc_leader
				death_reason = death_duel
			}
		}
		else = {
			death = { 
				killer = scope:orc_1
				death_reason = death_duel
			}
		}
	}
}