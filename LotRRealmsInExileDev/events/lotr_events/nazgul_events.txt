namespace = nazgul

nazgul.0001 = { # Nazgûl sighting reported
	title = nazgul.0001.t
	desc = nazgul.0001.desc
	theme = unfriendly
	override_background = { event_background = throne_room }
	left_portrait = {
		character = root
		animation = worry
	}
	right_portrait = {
		left_portrait = {
		character = scope:messenger
		animation = throne_room_bow_3
	}
	
	trigger = {
		any_character_artifact = { has_variable = ring_of_men }
		is_nazgul = no
	}
	
	immediate = {
		capital_county = {
			add_county_modifier = peasants_spooked_by_nazgul
			years = 5
		}
		any_character_artifact = {
			limit = { has_variable = ring_of_men }
			any_artifact_claimant = {
				limit = { has_trait = nazgul }
				save_scope_as = nazgul
			}
		}
		create_character_memory = {
			type = spooked_my_peasants
			participants = {
				nazgul = scope:nazgul
			}
		}
		if = {
			limit = {
				exists = cp:councillor_steward
				cp:councillor_steward = { is_available = yes }
			}
			cp:councillor_steward = { save_scope_as = messenger }
		}
		else_if = {
			limit = {
				exists = cp:councillor_marshal
				cp:councillor_marshal = { is_available = yes }
			}
			cp:councillor_marshal = { save_scope_as = messenger }
		}
		else_if = {
			limit = {
				exists = cp:councillor_chancellor
				cp:councillor_chancellor = { is_available = yes }
			}
			cp:councillor_chancellor = { save_scope_as = messenger }
		}
		else_if = {
			limit = {
				exists = cp:councillor_spymaster
				cp:councillor_spymaster = { is_available = yes }
			}
			cp:councillor_spymaster = { save_scope_as = messenger }
		}
		else_if = {
			limit = {
				exists = cp:councillor_court_chaplain
				cp:councillor_court_chaplain = { is_available = yes }
			}
			cp:councillor_court_chaplain = { save_scope_as = messenger }
		}
	}
	
	option = { 
		name = nazgul.0001.a
		add_stress = 50
		trigger_event = {
			id = nazgul.0002
			days = { 180 225 }
	}
}

nazgul.0002 = { # Nazgûl murders a courtier
	title = nazgul.0002.t
	desc = nazgul.0002.desc
	theme = death
	override_background = { event_background = throne_room }
	left_portrait = {
		character = root
		animation = disbelief
	}
	right_portrait = {
		left_portrait = {
		character = scope:messenger
		animation = throne_room_bow_3
	}
	lower_center_portrait = {
		character = scope:victim
	}
	
	trigger = {
		any_character_artifact = { has_variable = ring_of_men }
		is_nazgul = no
	}
	
	immediate = {
		if = {
			limit = {
				exists = cp:councillor_steward
				cp:councillor_steward = { is_available = yes }
			}
			cp:councillor_steward = { save_scope_as = messenger }
		}
		else_if = {
			limit = {
				exists = cp:councillor_marshal
				cp:councillor_marshal = { is_available = yes }
			}
			cp:councillor_marshal = { save_scope_as = messenger }
		}
		else_if = {
			limit = {
				exists = cp:councillor_chancellor
				cp:councillor_chancellor = { is_available = yes }
			}
			cp:councillor_chancellor = { save_scope_as = messenger }
		}
		else_if = {
			limit = {
				exists = cp:councillor_spymaster
				cp:councillor_spymaster = { is_available = yes }
			}
			cp:councillor_spymaster = { save_scope_as = messenger }
		}
		else_if = {
			limit = {
				exists = cp:councillor_court_chaplain
				cp:councillor_court_chaplain = { is_available = yes }
			}
			cp:councillor_court_chaplain = { save_scope_as = messenger }
		}
		random_courtier = {
			limit = {
				basic_is_available_ai = yes
				NOT = { is_close_or_extended_family_of = root }
				has_friendly_relationship_with_root_trigger = yes
			}
			alternative_limit = {
				basic_is_available_ai = yes
				NOT = { is_close_or_extended_family_of = root }
				OR = { #You probably care more for highly skilled courtiers
					martial > high_skill_rating
					diplomacy > high_skill_rating
					intrigue > high_skill_rating
					learning > high_skill_rating
					stewardship > high_skill_rating
					prowess > high_skill_rating
				}
			}
			save_scope_as = victim
			show_as_tooltip = {
				death = {
					death_reason = death_murder
					killer = scope:nazgul
				}
			}
		}			
	}
	
	option = { #Tighten the guard
		name = nazgul.0002.a
		trigger_event = {
			id = nazgul.0004
			days = { 180 225 }
	}
	
	option = { #Challenge the Nazgûl
		name = nazgul.0002.b
		
	}
	
	option = { #Return the precious... NOOOOOOOOOOOOOOO
		name = nazgul.0002.a
		trigger_event = {
			id = nazgul.0003
			days = { 5 }
	}
}