namespace = flavourevent

#Hears a Sound on the Wind - Positive
flavourevent.0001 = {
	type = character_event
	title = flavourevent.0001.t
	desc = {
		flavourevent.0001.desc.start
		first_valid = {
			triggered_desc = {
				trigger = {
					lotr_orc_buildings = yes
				}
				desc = flavourevent.0001.desc.end.evil
			}
			desc = flavourevent.0001.desc.end.good
		}		
	}
	theme = friendly
	
	left_portrait = {
		character = root
		animation = happiness
	}	

	trigger = {
		NOT = { has_character_flag = flavourevent_sound_on_the_wind_event_happened }
	}
		
	immediate = {
		play_music_cue = mx_cue_touching_moment 
	}
	
	option = { # Lovely...
		name = flavourevent.0001.a
		add_stress = -30
		add_character_flag = flavourevent_sound_on_the_wind_event_happened
		add_character_modifier = {
			modifier = flavourevent_sound_on_the_wind_positive
			years = 5
		}
	}
}

#Hears a Sound on the Wind - Negative
flavourevent.0002 = {
	type = character_event
	title = flavourevent.0002.t
	desc = {
		flavourevent.0002.desc.start
		first_valid = {
			triggered_desc = {
				trigger = {
					lotr_orc_buildings = yes
				}
				desc = flavourevent.0002.desc.end.evil
			}
			desc = flavourevent.0002.desc.end.good
		}		
	}
	theme = mental_health
	
	left_portrait = {
		character = root
		animation = shock
	}	

	trigger = {
		NOT = { has_character_flag = flavourevent_sound_on_the_wind_event_happened }
	}
		
	immediate = {
		play_music_cue = mx_cue_touching_moment  #####!!!!!
	}
	
	option = { # Make it stop!
		name = flavourevent.0002.a
		add_stress = 30
		add_character_flag = flavourevent_sound_on_the_wind_event_happened
		add_character_modifier = {
			modifier = flavourevent_sound_on_the_wind_negative
			years = 5
		}
	}
}

#Offered Honey Cakes
flavourevent.0003 = {
	type = character_event
	title = flavourevent.0003.t
	desc = flavourevent.0003.desc
	theme = friendly
	
	left_portrait = {
		character = root
		animation = happiness
	}

	trigger = {
		NOT = { has_character_flag = flavourevent_offered_honeycakes_happened }
	}
	
	option = { # Tasty!
		name = flavourevent.0003.a
		remove_short_term_gold = 10
		add_character_flag = {
			flag = flavourevent_offered_honeycakes_happened
			years = 15
		}
		add_character_modifier = {
			modifier = flavourevent_ate_honey_cake
			years = 1
		}
		stress_impact = {
			base = miniscule_stress_impact_loss
			comfort_eater = minor_stress_impact_loss
		}			
		if = {
			limit = {
				has_trait = temperate
			}		
			random = {
				chance = 33

				remove_trait = temperate
				add_trait_force_tooltip = gluttonous	
			}			
		}
	}

	option = { # No thanks...
		name = flavourevent.0003.b
		add_character_flag = {
			flag = flavourevent_offered_honeycakes_happened
			years = 15
		}
		if = {
			limit = {
				has_trait = gluttonous
			}		
			random = {
				chance = 33

				remove_trait = gluttonous
				add_trait_force_tooltip = temperate	
			}			
		}
		stress_impact = {
			gluttonous = minor_stress_impact_loss
		}			
	}
}

# Overhear Gossiping Servants
flavourevent.0004 = {
	type = character_event
	title = flavourevent.0004.t
	desc = flavourevent.0004.desc
	theme = friendly
	override_background = { event_background = corridor_day }
	
	right_portrait = {
		character = root
		animation = boredom
	}
	

	trigger = {
		NOT = { has_character_flag = flavourevent_overheard_gossiping_servants_happened }
	}
		
	option = { # Do something else
		name = flavourevent.0004.a
		add_character_flag = {
			flag = flavourevent_overheard_gossiping_servants_happened
			years = 15
		}
		add_stress = -5
		stress_impact = {
			shy = minor_stress_impact_loss
			gregarious = minor_stress_impact_gain
		}	
	}
	
	option = { # Keep listening
		name = flavourevent.0004.b
		add_character_flag = {
			flag = flavourevent_overheard_gossiping_servants_happened
			years = 15
		}
		add_character_modifier = {
			modifier = flavourevent_overheard_gossiping_servants
			years = 3
		}
		stress_impact = {
			shy = minor_stress_impact_gain
			gregarious = minor_stress_impact_loss
		}
	}
	
	option = { # Kill them
		name = flavourevent.0004.c
		add_character_flag = {
			flag = flavourevent_overheard_gossiping_servants_happened
			years = 15
		}
		add_dread = 10
		stress_impact = {
			just = medium_stress_impact_gain
			compassionate = minor_stress_impact_gain
			arbitrary = minor_stress_impact_loss
			sadistic = minor_stress_impact_loss
		}
		if = {
			limit = {
				has_trait = just
			}		
			random = {
				chance = 50

				remove_trait = just
				add_trait_force_tooltip = arbitrary	
			}			
		}
	}
}

# Tried and failed to remember a dream
flavourevent.0005 = {
	type = character_event
	title = flavourevent.0005.t
	desc = flavourevent.0005.desc

	theme = friendly
	override_background = {
		event_background = bedchamber
	}
	
	left_portrait = {
		character = root
		animation = worry
	}
	
	trigger = {
		NOR = {
			lotr_orc_buildings = yes #Evil characters shouldn't really worry about their dreams
			has_character_flag = flavourevent_forgotten_dream_happened		
		}
	}
	
	option = { # Oh well
		name = flavourevent.0005.a
		add_character_flag = {
			flag = flavourevent_forgotten_dream_happened
			years = 10
		}
		stress_impact = {
			content = miniscule_stress_impact_loss
		}	
	}	
	option = { # Must remember!
		name = flavourevent.0005.b
		add_character_flag = {
			flag = flavourevent_forgotten_dream_happened
			years = 10
		}
		random_list = {
			40 = {
				desc = flavourevent.0005.a.a
				send_interface_toast = {
					left_icon = ROOT
					title = flavourevent.0005.toast.a
					add_prestige = 20
				}
			}
			60 = {
				desc = flavourevent.0005.a.b
				send_interface_toast = {
					left_icon = ROOT
					title = flavourevent.0005.toast.b
					stress_impact = {
						base = miniscule_stress_impact_gain
						stubborn = miniscule_stress_impact_gain
					}
				}
			}
		}
	}
}

# Servant's child recently died
flavourevent.0006 = {
	type = character_event
	title = flavourevent.0006.t
	desc = flavourevent.0006.desc
	theme = family
	
	right_portrait = root
	
	option = { # Say generic words of condolence
		name = flavourevent.0006.a
		add_prestige = 20
		add_piety = -10
		stress_impact = {
			callous = minor_stress_impact_gain
			sadistic = minor_stress_impact_gain
		}
		ai_chance = {
			base = 30
			ai_value_modifier = {
				ai_compassion = 1
			}
		}
	}	
	option = { # Religious option
		name = flavourevent.0006.b
		add_piety = 20
		add_prestige = -10
		stress_impact = {
			cynical = minor_stress_impact_gain
			callous = minor_stress_impact_gain
			sadistic = minor_stress_impact_gain
		}
		ai_chance = {
			base = 20
			ai_value_modifier = {
				ai_zeal = 1
			}
		}
	}	
	option = { # I don't care
		name = flavourevent.0006.c
		add_dread = 5
		stress_impact = {
			compassionate = medium_stress_impact_gain
			humble = minor_stress_impact_gain
		}
		ai_chance = {
			base = 20
			ai_value_modifier = {
				ai_compassion = -1
			}
		}
	}	
	option = { # Give servant a couple weeks off
		name = flavourevent.0006.d
		trigger = {
			has_trait = compassionate
			NOT = { lotr_orc_buildings = yes }
		}
		trait = compassionate
		add_piety = 20
		add_prestige = 20
		ai_chance = {
			base = 30
			ai_value_modifier = {
				ai_compassion = 1
			}
		}
	}
}