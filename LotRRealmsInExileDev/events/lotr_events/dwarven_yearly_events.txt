namespace = dwarven_yearly

### Dwarven Yearly Events ###
#			dwarven_yearly.0001		Hazardous Quaffing




###################################################################
### dwarven_yearly.0001 - Hazardous Quaffing by Brice Underhill ###
###################################################################

dwarven_yearly.0001 = {
	content_source = realms_dlc
	type = character_event
	title = dwarven_yearly.0001.t
	desc = dwarven_yearly.0001.desc
	theme = party
	
	left_portrait = {
		character = root
		animation = shock
	}
	right_portrait = {
		character = scope:steward
		animation = toast
	}
	
	trigger = {
		is_dwarf = yes 
	}
	
	immediate = {
		cp:councillor_steward ?= { save_scope_as = steward }
	}
	
	option = { #Import luxury tankards
		name = dwarven_yearly.0001.a
		remove_short_term_gold = medium_gold_value
		add_prestige = medium_prestige_gain
		
		if = {
			limit = { amenity_level = { type = court_food_quality value = 1 } }
			set_amenity_level = { type = court_food_quality value = 2 }
		}
		else_if = {
			limit = { amenity_level = { type = court_food_quality value = 2 } }
			set_amenity_level = { type = court_food_quality value = 3 }
		}
		else_if = {
			limit = { amenity_level = { type = court_food_quality value = 3 } }
			set_amenity_level = { type = court_food_quality value = 4 }
		}
		else_if = {
			limit = { amenity_level = { type = court_food_quality value = 4 } }
			set_amenity_level = { type = court_food_quality value = 5 }
		}
		else = {
			add_prestige = minor_prestige_gain
		}
		
		every_vassal = {
			custom = every_courtly_vassal
			limit = {
				has_vassal_stance = courtly
			}
			add_opinion = {
				modifier = impressed_opinion
				opinion = 15
				target = root
			}
		}
		ai_chance = {
			base = 0
			ai_value_modifier = {
				ai_greed = -2
				ai_boldness = 1
				ai_honor = 1
			}
		}
	}
	
	option = { #Commission local ones
		name = dwarven_yearly.0001.b
		
		remove_short_term_gold = minor_gold_value
		
		every_vassal = {
			custom = every_courtly_vassal
			limit = {
				has_vassal_stance = courtly
			}
			add_opinion = {
				modifier = disappointed_opinion
				opinion = -10
				target = root
			}
		}
		
		ai_chance = {
			base = 0
			ai_value_modifier = {
				ai_greed = -1
				ai_boldness = 0.5
				ai_honor = 0.5
				ai_rationality = 1
			}
		}
	}
	
	option = { #Just learn to drink properly
		name = dwarven_yearly.0001.c
		
		every_vassal = {
			custom = every_courtly_vassal
			limit = {
				has_vassal_stance = courtly
			}
			add_opinion = {
				modifier = angry_opinion
				opinion = -30
				target = root
			}
		}
		
		if = {
			limit = { amenity_level = { type = court_fashion value = max_amenity_level } }
			set_amenity_level = { type = court_fashion value = very_high_amenity_level }
		}
		else_if = {
			limit = { amenity_level = { type = court_fashion value = very_high_amenity_level } }
			set_amenity_level = { type = court_fashion value = high_amenity_level }
		}
		else_if = {
			limit = { amenity_level = { type = court_fashion value = high_amenity_level } }
			set_amenity_level = { type = court_fashion value = medium_amenity_level }
		}
		else_if = {
			limit = { amenity_level = { type = court_fashion value = medium_amenity_level } }
			set_amenity_level = { type = court_fashion value = low_amenity_level }
		}
		else = {
			add_prestige = minor_prestige_loss
		}
		
		ai_chance = {
			base = 0
			ai_value_modifier = {
				ai_greed = 2
				ai_boldness = -1
				ai_honor = -1
			}
		}
	}
}

###################################################################
### dwarven_yearly.0002 - "A Hunting Rivalry by Vaelar          ###
###################################################################

dwarven_yearly.0002 = {
	content_source = realms_dlc
	type = character_event
	title = dwarven_yearly.0002.t
	desc = dwarven_yearly.0002.desc
	theme = hunt_activity
	
	left_portrait = {
		character = root
		animation = disbelief
	}
	lower_center_portrait = {
		character = scope:dwarven_hunter_character
		animation = vengeful
	}
	lower_right_portrait = {
		character = scope:dale_hunter
		animation = dismissal
	}

	trigger = {
		NOT = { employs_court_position = master_of_hunt_court_position }
		is_dwarf = yes
		OR = {
			culture = culture:longbeards
			capital_county = { culture = culture:longbeards }
			capital_province = {
				OR = {
					geographical_region = middleearth_iron_mountains_grey_mountains
					geographical_region = middleearth_iron_mountains_iron_hills
					geographical_region = middleearth_iron_mountains_erebor
				}
			}
		}
	}

	immediate = {
		create_character = {
			location = capital_province
			age = { 50 200 }
			culture = culture:longbeards
			faith = location.county.faith
			gender_female_chance = 50
			dynasty = none
			trait = lifestyle_hunter
			random_traits = yes
			save_scope_as = dwarven_hunter_character
		}
		create_character = {
			location = root.capital_province
			template = pool_repopulate_prowess
			culture = culture:dalemen
			faith = faith:faith_dale
			trait = lifestyle_hunter
			save_scope_as = dale_hunter
		}
	}		

	option = { # Dwarves are clearly better hunters!
		name = dwarven_yearly.0002.b
		add_prestige = medium_prestige_gain

		scope:dale_hunter = {
			add_opinion = {
				modifier = angry_opinion
				opinion = -25
				target = root
			}
		}
		
		every_vassal = {
		 limit = { is_dwarf = yes }
			add_opinion = {
				modifier = friendly_interaction
				opinion = 10
				target = root
			}
		}
	}

	option = { # I'm not so sure if he's wrong or not...
		name = dwarven_yearly.0002.c
		add_prestige = medium_prestige_loss

		scope:dale_hunter = {
			add_opinion = {
				modifier = friendly_interaction
				opinion = 10
				target = root
			}
		}
		
		every_vassal = {
		 limit = { is_dwarf = yes }
			add_opinion = {
				modifier = angry_opinion
				opinion = -25
				target = root
			}
		}
	}
}