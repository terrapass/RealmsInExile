namespace = dwarven_yearly

### Dwarven Yearly Events ###
#			dwarven_yearly.0001		Hazardous Quaffing




###################################################################
### dwarven_yearly.0001 - Hazardous Quaffing by Brice Underhill ###
###################################################################

dwarven_yearly.0001 = {
	content_source = realms
	type = character_event
	title = dwarven_yearly.0001.t
	desc = dwarven_yearly.0001.desc
	theme = party
	
	left_portrait = {
		character = root
		animation = shock
	}
	right_portrait = {
		character = scope:steward
		animation = toast
	}
	
	trigger = {
		is_dwarf = yes 
	}
	
	immediate = {
		cp:councillor_steward ?= { save_scope_as = steward }
	}
	
	option = { #Import luxury tankards
		name = dwarven_yearly.0001.a
		remove_short_term_gold = medium_gold_value
		add_prestige = medium_prestige_gain
		
		every_vassal = {
			custom = every_courtly_vassal
			limit = {
				has_vassal_stance = courtly
			}
			add_opinion = {
				modifier = impressed_opinion
				opinion = 15
				target = root
			}
		}
		ai_chance = {
			base = 0
			ai_value_modifier = {
				ai_greed = -2
				ai_boldness = 1
				ai_honor = 1
			}
		}
	}
	
	option = { #Commission local ones
		name = dwarven_yearly.0001.b
		
		remove_short_term_gold = minor_gold_value
		
		every_vassal = {
			custom = every_courtly_vassal
			limit = {
				has_vassal_stance = courtly
			}
			add_opinion = {
				modifier = disappointed_opinion
				opinion = -10
				target = root
			}
		}
		
		if = {
			limit = { amenity_level = { type = court_fashion value = max_amenity_level } }
			set_amenity_level = { type = court_fashion value = very_high_amenity_level }
		}
		else_if = {
			limit = { amenity_level = { type = court_fashion value = very_high_amenity_level } }
			set_amenity_level = { type = court_fashion value = high_amenity_level }
		}
		else_if = {
			limit = { amenity_level = { type = court_fashion value = high_amenity_level } }
			set_amenity_level = { type = court_fashion value = medium_amenity_level }
		}
		else_if = {
			limit = { amenity_level = { type = court_fashion value = medium_amenity_level } }
			set_amenity_level = { type = court_fashion value = low_amenity_level }
		}
		else = {
			add_prestige = minor_prestige_loss
		}
		ai_chance = {
			base = 0
			ai_value_modifier = {
				ai_greed = -1
				ai_boldness = 0.5
				ai_honor = 0.5
				ai_rationality = 1
			}
		}
	}
	
	option = { #Just learn to drink properly
		name = dwarven_yearly.0001.c
		
		every_vassal = {
			custom = every_courtly_vassal
			limit = {
				has_vassal_stance = courtly
			}
			add_opinion = {
				modifier = angry_opinion
				opinion = -30
				target = root
			}
		}
		
		if = {
			limit = { amenity_level = { type = court_fashion value = max_amenity_level } }
			set_amenity_level = { type = court_fashion value = high_amenity_level }
		}
		else_if = {
			limit = { amenity_level = { type = court_fashion value = very_high_amenity_level } }
			set_amenity_level = { type = court_fashion value = medium_amenity_level }
		}
		else_if = {
			limit = { amenity_level = { type = court_fashion value = high_amenity_level } }
			set_amenity_level = { type = court_fashion value = low_amenity_level }
		}
		else_if = {
			limit = { amenity_level = { type = court_fashion value = medium_amenity_level } }
			set_amenity_level = { type = court_fashion value = low_amenity_level }
			add_prestige = minor_prestige_loss
		}
		else = {
			add_prestige = medium_prestige_loss
		}
		ai_chance = {
			base = 0
			ai_value_modifier = {
				ai_greed = 2
				ai_boldness = -1
				ai_honor = -1
			}
		}
	}
}
