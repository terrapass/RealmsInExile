namespace = theodred

theodred.0100 = { # orcs in the westfold
	type = character_event
	title = theodred.0100.t
	desc = theodred.0100.desc
	theme = martial

	left_portrait = {
		character = root
		animation = anger
	}

	trigger = {
		has_character_flag = is_theodred
	}

	immediate = { 
		add_character_flag = isengard_unleashed_1
	}

	option = {
		name = theodred.0100.a
		custom_tooltip = theodred.0100.a.tt
		trigger_event = {
			id = theodred.0101
			days = { 10 20 }
		}
	}

	option = {
		name = theodred.0100.b
		custom_tooltip = theodred.0100.b.tt
		trigger_event = {
			id = theodred.0105
			days = { 10 20 }
		}
	}
}

theodred.0101 = { # too late to save the village
	type = character_event
	title = theodred.0101.t
	desc = theodred.0101.desc
	theme = battle
	override_background = {
		event_background = burning_building
	}

	left_portrait = {
		character = root
		animation = grief
	}

	immediate = { 
		add_character_flag = isengard_unleashed_2
	}

	option = {
		name = theodred.0101.a
		trigger_event = {
			id = theodred.0102
			days = { 10 20 }
		}
	}
}

theodred.0102 = { # ambushed at the Isen
	type = character_event
	title = theodred.0102.t
	desc = theodred.0102.desc
	theme = battle

	left_portrait = {
		character = root
		animation = severelywounded
	}

	immediate = {
		add_trait = wounded_2
		random_list = {
			40 = {
				save_scope_value_as = {
					name = battle_outcome
					value = flag:theodred_dead
				}
			}
			10 = {
				save_scope_value_as = {
					name = battle_outcome
					value = flag:theodred_alive
				}
			}
		}
	}
	option = {
		name = theodred.0102.a

		if = {
			limit = {
				scope:battle_outcome = flag:theodred_dead
			}
			trigger_event = {
				id = theodred.0103
				days = 1 
			}
		}
		else_if = {
			limit = {
				scope:battle_outcome = flag:theodred_alive
			}
			trigger_event = {
				id = theodred.0104
				days = 1 
			}
		}
	}

}

theodred.0103 = { # dead from injuries
	type = character_event
	title = theodred.0103.t
	desc = theodred.0103.desc
	theme = death
	override_background = {
		event_background = wilderness
	}

	option = {
		name = theodred.0103.a
		death = {
			death_reason = death_wounded_2 # Theodred is slain
		}
		character:6000053 = { # Sauruman is informed
			trigger_event = {
				id = theodred.0107
				days = 5
			}
		}
	}
}

theodred.0104 = { # survived injuries
	type = character_event
	title = theodred.0104.t
	desc = theodred.0104.desc
	theme = recovery
	override_background = {
		event_background = wilderness
	}

	left_portrait = {
		character = root
		animation = severelyinjured
	}

	immediate = { add_trait = one_eyed }

	option = {
		name = theodred.0104.a
		trigger_event = {
			id = theodred.0106
			days = { 5 10 }
		}
		character:6000053 = { # Sauruman is informed
			trigger_event = {
				id = theodred.0108
				days = 5
			}
		}
	}
}

theodred.0105 = { # speak with Grima
	type = character_event
	title = theodred.0105.t
	desc = theodred.0105.desc
	theme = realm

	left_portrait = {
		character = root
		animation = personality_rational
	}

	right_portrait = {
		character = character:6000044
		animation = disapproval
	}

	option = {
		name = theodred.0105.a
		custom_tooltip = theodred.0105.a.tt
		trigger_event = {
			id = theodred.0102
			days = { 10 20 }
		}
	}

	option = {
		name = theodred.0105.b
		custom_tooltip = theodred.0105.b.tt
		disinherit_effect = yes
		trigger_event = {
			id = theodred.0106
			days = { 10 20 }
		}
	}
}

theodred.0106 = {
	type = character_event
	title = theodred.0106.t
	desc = theodred.0106.desc
	theme = war

	immediate = { save_scope_as = character }

	option = {
		name = theodred.0106.a
		# add_pressed_claim = title:d_isengard
		start_war = {
			casus_belli = claim_cb
			target = character:6000053
			claimant = root
			target_title = title:d_isengard
		}
		spawn_army = {
			uses_supply = no
			inheritable = yes
			name = mustered_rohirrim_event_troops
			men_at_arms = {
				type = eotheod_light_horsemen
				stacks = 15
			}
			men_at_arms = {
				type = eotheod_horse_archers
				stacks = 12
			}
			men_at_arms = {
				type = eotheod_horse_axemen
				stacks = 12
			}
			men_at_arms = {
				type = helmingas_warriors
				stacks = 15
			}
			men_at_arms = {
				type = westfolders
				stacks = 12
			}
			location = capital_province
		}
	}
}

theodred.0107 = { # Sauruman is informed of Theodred's death
	type = character_event
	title = theodred.0107.t
	desc = theodred.0107.desc
	theme = intrigue
	left_portrait = {
		character = root
		animation = personality_callous
	}
	
	option = {
		name = theodred.0107.a
	}
}

theodred.0108 = { # Sauruman is informed of Theodred's survival
	type = character_event
	title = theodred.0108.t
	desc = theodred.0108.desc
	theme = intrigue
	left_portrait = {
		character = root
		animation = anger
	}
	
	option = {
		name = theodred.0108.a
	}
}










