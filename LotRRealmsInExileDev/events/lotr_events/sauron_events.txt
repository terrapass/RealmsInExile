namespace = sauron

# Events about Sauron
#	sauron.0500	conversion for chaplains
#	sauron.0501	conversion for vassals and court
#	sauron.0502	conversion for barons (and RD)
#	sauron.0503	for vassals of vassals
#   	sauron.0510	Sauron introduction 
#   	sauron.0511	Grond Construction
#	sauron.1000		Recall of the Golden King
#	sauron.2000		Destroy Gondor Decision

### CLEANUP EVENTS FOR MAIA CULTURE ###
#sauron.0500 = { #for chaplains
#	hidden = yes
#
#	trigger = {
#		culture = culture:maiar_fallen
#	}
#
#
#	immediate = {
#		random_councillor = {
#			limit = {
#				has_council_position = councillor_court_chaplain
#			}
#			set_culture = culture:morlughai
#		}
#	}
#}

sauron.0501 = {
	hidden = yes


	immediate = {
		if = {
			limit = {
				culture = culture:maiar_fallen
				NOT = { has_character_flag = is_sauron }
			}
		random_list = { # Pick a culture, any culture
			20 = { set_culture = culture:morlughai }
			20 = { set_culture = culture:ungurhai }
			20 = { set_culture = culture:luftutaumhai }
			20 = { set_culture = culture:ghashhai }
			20 = { set_culture = culture:ruhai }
		}	
		remove_trait = education_learning_1
		remove_trait = education_learning_2
		remove_trait = education_learning_3
		remove_trait = education_learning_4
		remove_trait = education_stewardship_1
		remove_trait = education_stewardship_2
		remove_trait = education_stewardship_3
		remove_trait = education_stewardship_4
		remove_trait = education_diplomacy_1
		remove_trait = education_diplomacy_2
		remove_trait = education_diplomacy_3
		remove_trait = education_diplomacy_4
		remove_trait = education_martial_1
		remove_trait = education_martial_2
		remove_trait = education_martial_3
		remove_trait = education_martial_4
		remove_trait = education_intrigue_1
		remove_trait = education_intrigue_2
		remove_trait = education_intrigue_3
		remove_trait = education_intrigue_4
		remove_trait = physician_1
		remove_trait = physician_2
		remove_trait = physician_3
		remove_trait = theologian
		remove_trait = lifestyle_herbalist
		remove_trait = diplomat
		remove_trait = administrator
		remove_trait = architect
		remove_trait = scholar
		remove_trait = forgiving
		remove_trait = patient
		remove_trait = temperate
		remove_trait = compassionate
		add_martial_skill = 4
		add_prowess_skill = 6
		random_list = { # More Orc-like education
			5 = { add_trait = education_martial_1 }
			25 = { add_trait = education_martial_2 }
			30 = { add_trait = education_martial_3 }
			15 = { add_trait = education_martial_4 }
			5 = { add_trait = education_intrigue_1 }
			10 = { add_trait = education_intrigue_2 }
			5 = { add_trait = education_intrigue_3 }
			5 = { add_trait = education_intrigue_4 }
		}
		random_list = { # More Orc-like lifestyles
			60 = { add_prowess_skill = 1 }
			2 = { add_trait = blademaster_1 }
			5 = { add_trait = blademaster_2 }
			3 = { add_trait = blademaster_3 }
			5 = { add_trait = reveler_1 }
			3 = { add_trait = reveler_2 }
			2 = { add_trait = reveler_3 }
			2 = { add_trait = hunter_1 }
			5 = { add_trait = hunter_2 }
			3 = { add_trait = hunter_3 }
			6 = { add_trait = mystic_1 }
			3 = { add_trait = mystic_2 }
			1 = { add_trait = mystic_3 }
		}
		random_list = { # Orc variety
			65 = { add_prowess_skill = 1 }
			5 = { add_trait = giant }
			3 = { add_trait = lunatic_1 }
			2 = { add_trait = possessed_1 }
			5 = { add_trait = strong }
			15 = { add_trait = scarred }
			5 = { add_trait = dull }
		}
		give_random_commander_trait_effect = yes
		}
		every_vassal_or_below = {
			limit = {
				culture = culture:maiar_fallen
				NOT = { has_character_flag = is_sauron }
			}
			#trigger_event = sauron.0503
			random_list = { # Pick a culture, any culture
				20 = { set_culture = culture:morlughai }
				20 = { set_culture = culture:ungurhai }
				20 = { set_culture = culture:luftutaumhai }
				20 = { set_culture = culture:ghashhai }
				20 = { set_culture = culture:ruhai }
			}
			remove_trait = education_learning_1
			remove_trait = education_learning_2
			remove_trait = education_learning_3
			remove_trait = education_learning_4
			remove_trait = education_stewardship_1
			remove_trait = education_stewardship_2
			remove_trait = education_stewardship_3
			remove_trait = education_stewardship_4
			remove_trait = education_diplomacy_1
			remove_trait = education_diplomacy_2
			remove_trait = education_diplomacy_3
			remove_trait = education_diplomacy_4
			remove_trait = education_martial_1
			remove_trait = education_martial_2
			remove_trait = education_martial_3
			remove_trait = education_martial_4
			remove_trait = education_intrigue_1
			remove_trait = education_intrigue_2
			remove_trait = education_intrigue_3
			remove_trait = education_intrigue_4
			remove_trait = physician_1
			remove_trait = physician_2
			remove_trait = physician_3
			remove_trait = theologian
			remove_trait = lifestyle_herbalist
			remove_trait = diplomat
			remove_trait = administrator
			remove_trait = architect
			remove_trait = scholar
			remove_trait = forgiving
			remove_trait = patient
			remove_trait = temperate
			remove_trait = compassionate
			add_martial_skill = 4
			add_prowess_skill = 6
			random_list = { # More Orc-like education
				5 = { add_trait = education_martial_1 }
				25 = { add_trait = education_martial_2 }
				30 = { add_trait = education_martial_3 }
				15 = { add_trait = education_martial_4 }
				5 = { add_trait = education_intrigue_1 }
				10 = { add_trait = education_intrigue_2 }
				5 = { add_trait = education_intrigue_3 }
				5 = { add_trait = education_intrigue_4 }
			}
			random_list = { # More Orc-like lifestyles
				60 = { add_prowess_skill = 1 }
				2 = { add_trait = blademaster_1 }
				5 = { add_trait = blademaster_2 }
				3 = { add_trait = blademaster_3 }
				5 = { add_trait = reveler_1 }
				3 = { add_trait = reveler_2 }
				2 = { add_trait = reveler_3 }
				2 = { add_trait = hunter_1 }
				5 = { add_trait = hunter_2 }
				3 = { add_trait = hunter_3 }
				6 = { add_trait = mystic_1 }
				3 = { add_trait = mystic_2 }
				1 = { add_trait = mystic_3 }
			}
			random_list = { # Orc variety
				65 = { add_prowess_skill = 1 }
				5 = { add_trait = giant }
				3 = { add_trait = lunatic_1 }
				2 = { add_trait = possessed_1 }
				5 = { add_trait = strong }
				15 = { add_trait = scarred }
				5 = { add_trait = dull }
			}
			give_random_commander_trait_effect = yes
			}
			every_courtier_or_guest = {
				limit = {
					culture = culture:maiar_fallen
					NOT = { has_character_flag = is_sauron }
				}
			random_list = { # Pick a culture, any culture
				20 = { set_culture = culture:morlughai }
				20 = { set_culture = culture:ungurhai }
				20 = { set_culture = culture:luftutaumhai }
				20 = { set_culture = culture:ghashhai }
				20 = { set_culture = culture:ruhai }
			}
			remove_trait = education_learning_1
			remove_trait = education_learning_2
			remove_trait = education_learning_3
			remove_trait = education_learning_4
			remove_trait = education_stewardship_1
			remove_trait = education_stewardship_2
			remove_trait = education_stewardship_3
			remove_trait = education_stewardship_4
			remove_trait = education_diplomacy_1
			remove_trait = education_diplomacy_2
			remove_trait = education_diplomacy_3
			remove_trait = education_diplomacy_4
			remove_trait = education_martial_1
			remove_trait = education_martial_2
			remove_trait = education_martial_3
			remove_trait = education_martial_4
			remove_trait = education_intrigue_1
			remove_trait = education_intrigue_2
			remove_trait = education_intrigue_3
			remove_trait = education_intrigue_4
			remove_trait = physician_1
			remove_trait = physician_2
			remove_trait = physician_3
			remove_trait = theologian
			remove_trait = lifestyle_herbalist
			remove_trait = diplomat
			remove_trait = administrator
			remove_trait = architect
			remove_trait = scholar
			remove_trait = forgiving
			remove_trait = patient
			remove_trait = temperate
			remove_trait = compassionate
			add_martial_skill = 4
			add_prowess_skill = 6
			random_list = { # More Orc-like education
				5 = { add_trait = education_martial_1 }
				25 = { add_trait = education_martial_2 }
				30 = { add_trait = education_martial_3 }
				15 = { add_trait = education_martial_4 }
				5 = { add_trait = education_intrigue_1 }
				10 = { add_trait = education_intrigue_2 }
				5 = { add_trait = education_intrigue_3 }
				5 = { add_trait = education_intrigue_4 }
			}
			random_list = { # More Orc-like lifestyles
				60 = { add_prowess_skill = 1 }
				2 = { add_trait = blademaster_1 }
				5 = { add_trait = blademaster_2 }
				3 = { add_trait = blademaster_3 }
				5 = { add_trait = reveler_1 }
				3 = { add_trait = reveler_2 }
				2 = { add_trait = reveler_3 }
				2 = { add_trait = hunter_1 }
				5 = { add_trait = hunter_2 }
				3 = { add_trait = hunter_3 }
				6 = { add_trait = mystic_1 }
				3 = { add_trait = mystic_2 }
				1 = { add_trait = mystic_3 }
			}
			random_list = { # Orc variety
				65 = { add_prowess_skill = 1 }
				5 = { add_trait = giant }
				3 = { add_trait = lunatic_1 }
				2 = { add_trait = possessed_1 }
				5 = { add_trait = strong }
				15 = { add_trait = scarred }
				5 = { add_trait = dull }
			}
			give_random_commander_trait_effect = yes
		}
	}
}

#sauron.0502 = { #for barons
#	hidden = yes
#
#	trigger = {
#		culture = culture:maiar_fallen
#		NOT = { has_character_flag = is_sauron }
#	}
#
#
#	immediate = { #shall likely replace with uruk later
#		random_list = { # Pick a culture, any culture
#			20 = { set_culture = culture:morlughai }
#			20 = { set_culture = culture:ungurhai }
#			20 = { set_culture = culture:luftutaumhai }
#			20 = { set_culture = culture:ghashhai }
#			20 = { set_culture = culture:ruhai }
#		}
#		remove_trait = education_learning_1
#		remove_trait = education_learning_2
#		remove_trait = education_learning_3
#		remove_trait = education_learning_4
#		remove_trait = education_stewardship_1
#		remove_trait = education_stewardship_2
#		remove_trait = education_stewardship_3
#		remove_trait = education_stewardship_4
#		remove_trait = education_diplomacy_1
#		remove_trait = education_diplomacy_2
#		remove_trait = education_diplomacy_3
#		remove_trait = education_diplomacy_4
#		remove_trait = education_martial_1
#		remove_trait = education_martial_2
#		remove_trait = education_martial_3
#		remove_trait = education_martial_4
#		remove_trait = education_intrigue_1
#		remove_trait = education_intrigue_2
#		remove_trait = education_intrigue_3
#		remove_trait = education_intrigue_4
#		remove_trait = physician_1
#		remove_trait = physician_2
#		remove_trait = physician_3
#		remove_trait = theologian
#		remove_trait = lifestyle_herbalist
#		remove_trait = diplomat
#		remove_trait = administrator
#		remove_trait = architect
#		remove_trait = scholar
#		remove_trait = forgiving
#		remove_trait = patient
#		remove_trait = temperate
#		remove_trait = compassionate
#		add_martial_skill = 4
#		add_prowess_skill = 6
#		random_list = { # More Orc-like education
#			5 = { add_trait = education_martial_1 }
#			25 = { add_trait = education_martial_2 }
#			30 = { add_trait = education_martial_3 }
#			15 = { add_trait = education_martial_4 }
#			5 = { add_trait = education_intrigue_1 }
#			10 = { add_trait = education_intrigue_2 }
#			5 = { add_trait = education_intrigue_3 }
#			5 = { add_trait = education_intrigue_4 }
#		}
#		random_list = { # More Orc-like lifestyles
#			60 = { add_prowess_skill = 1 }
#			2 = { add_trait = blademaster_1 }
#			5 = { add_trait = blademaster_2 }
#			3 = { add_trait = blademaster_3 }
#			5 = { add_trait = reveler_1 }
#			3 = { add_trait = reveler_2 }
#			2 = { add_trait = reveler_3 }
#			2 = { add_trait = hunter_1 }
#			5 = { add_trait = hunter_2 }
#			3 = { add_trait = hunter_3 }
#			6 = { add_trait = mystic_1 }
#			3 = { add_trait = mystic_2 }
#			1 = { add_trait = mystic_3 }
#		}
#		random_list = { # Orc variety
#			65 = { add_prowess_skill = 1 }
#			5 = { add_trait = giant }
#			3 = { add_trait = lunatic_1 }
#			2 = { add_trait = possessed_1 }
#			5 = { add_trait = strong }
#			15 = { add_trait = scarred }
#			5 = { add_trait = dull }
#		}
#		give_random_commander_trait_effect = yes
#	}
#}

#sauron.0503 = { #for recursion
#	hidden = yes
#
#	trigger = {
#		culture = culture:maiar_fallen
#		NOT = { has_character_flag = is_sauron }
#	}
#
#
#	immediate = {
#		trigger_event = {
#			id = sauron.0501
#			days = 1
#		}
#	}
#}

### Sauron Introduction

sauron.0510 = { 
	title = sauron.0510.t
	desc = sauron.0510.desc
	theme = battle
	left_portrait = {
		character = root
		animation = personality_zealous
	}
	
	option = { 
		name = sauron.0510.a
		custom_tooltip = sauron.0510.a.tt
		trigger_event  = {
			id = sauron.0512
			years = 5 
		}
		hidden_effect = {
			add_truce_both_ways = { 
				character = title:e_gondor_steward.holder
				years = 4
				name = TRUCE_GONDOR_MORDOR
			}
		}
	}
}

sauron.0511 = { # Grond Constructed
	title = sauron.0511.t
	desc = sauron.0511.desc
	theme = battle
	override_background = {
		event_background = grond
	}
	right_portrait = {
		character = root
		animation = war_attacker
	}
	
	option = { 
		name = sauron.0511.a

		spawn_army = {
			uses_supply = no
			inheritable = no
			name = "GROND"
			men_at_arms = {
				type = grond
				stacks = 1
			}
			origin = title:c_barad_dur.title_province
			location = capital_province
		}
	}
}

sauron.0512 = { # Assault on Osgiliath
	title = sauron.0512.t
	desc = sauron.0512.desc
	theme = battle
	left_portrait = {
		character = root
		animation = war_attacker
	}
	option = {
		name = sauron.0512.a
		if = {
			limit = { exists = title:e_gondor_steward }
			start_war = {
				casus_belli = county_conquest_cb 
				target = title:e_gondor_steward.holder
				target_title = title:c_curedain
				target_title = title:c_coruvegil
				target_title = title:c_faedur
				target_title = title:c_asgaril
			}
			#title:e_gondor_steward.holder = { # Notify holder of the defense of Osgiliath!
			#	trigger_event = {
			#		id = gondor.0120
			#		days = 1 
			#	}
			#}
		}
		if = {
			limit = { exists = title:e_gondor }
			start_war = {
				casus_belli = county_conquest_cb 
				target = title:e_gondor_steward.holder
				target_title = title:c_curedain
				target_title = title:c_coruvegil
				target_title = title:c_faedur
				target_title = title:c_asgaril
			}
			#title:e_gondor.holder = { # Notify holder of the defense of Osgiliath!
			#	trigger_event = {
			#		id = gondor.0120
			#		days = 1
			#	}
			#}
		}
		if = {
			limit = { exists = title:e_castamir }
			start_war = {
				casus_belli = county_conquest_cb 
				target = title:e_gondor_steward.holder
				target_title = title:c_curedain
				target_title = title:c_coruvegil
				target_title = title:c_faedur
				target_title = title:c_asgaril
			}
			#title:e_castamir.holder = { # Notify holder of the defense of Osgiliath!
			#	trigger_event = {
			#		id = gondor.0120
			#		days = 1
			#	}
			#}
		}
		ai_chance = {
			base = 100
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = -25
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = -55
			}
		}
	}
	option = {
		name = sauron.0512.b
		if = {
			limit = { exists = title:e_gondor_steward }
			start_war = {
				casus_belli = county_conquest_cb 
				target = title:e_gondor_steward.holder
				target_title = title:c_glorel
				target_title = title:c_alagdor
				target_title = title:c_morvegil
				target_title = title:c_nethos
			}
			#title:e_gondor_steward.holder = { # Notify holder of the defense of Osgiliath!
			#	trigger_event = {
			#		id = gondor.0120
			#		days = 1 
			#	}
			#}
		}
		if = {
			limit = { exists = title:e_gondor }
			start_war = {
				casus_belli = county_conquest_cb 
				target = title:e_gondor_steward.holder
				target_title = title:c_glorel
				target_title = title:c_alagdor
				target_title = title:c_morvegil
				target_title = title:c_nethos
			}
			title:e_gondor.holder = { # Notify holder of the defense of Osgiliath!
				trigger_event = {
					id = gondor.0120
					days = 1
				}
			}
		}
		if = {
			limit = { exists = title:e_castamir }
			start_war = {
				casus_belli = county_conquest_cb 
				target = title:e_gondor_steward.holder
				target_title = title:c_glorel
				target_title = title:c_alagdor
				target_title = title:c_morvegil
				target_title = title:c_nethos
			}
			#title:e_castamir.holder = { # Notify holder of the defense of Osgiliath!
			#	trigger_event = {
			#		id = gondor.0120
			#		days = 1
			#	}
			#}
		}
		ai_chance = {
			base = 0
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 25
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 45
			}
		}
	}
	option = { # We need time to prepare (event fires again in 5 years)
         name = sauron.0512.c
         custom_tooltip = sauron.0512.b.tt
        trigger = {
            NOT = { has_character_flag  = delayed_event_flag }
        }
        add_character_flag = {
             flag = delayed_event_flag
             years = 20
        }
        trigger_event = {
            id = sauron.0512
            years = 5 
        }
     }
	option = { # Osgiliath is too strong, we will rethink our approach (ends cycle)
		name = sauron.0512.d
		custom_tooltip = sauron.0512.c.tt
		add_prestige = -1000
		ai_chance = {
			base = 0
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 0
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 10
			}
		}
	}
}

sauron.1000 = { # Recall of the Golden King - seen from the Golden King's perspective
	title = sauron.1000.t
	desc = sauron.1000.desc
	theme = diplomacy
	left_portrait = {
		character = scope:sauron
		animation = personality_dishonorable
	}
	right_portrait = {
		character = scope:golden_king
		animation = personality_zealous
	}
	
	option = { # Of course my master, I will return to Mordor
		name = sauron.1000.a
		
		if = { # Find out who will be the Vizier of Abrakhan - prioritizing the Black Vizier
			limit = {
				character:syarrhul1 = {
					is_alive = yes
					is_vassal_of = scope:golden_king
				}
			}
			character:syarrhul1 = {
				save_scope_as = vizier_of_abrakhan
			}
		}
		else_if = {
			limit = {
				character:syarrhul1 = {
					NOR = {
						is_alive = yes
						is_vassal_of = scope:golden_king
					}
				}
			}
			
		}
		scope:vizier_of_abrakhan = { # transfer all held lands to the Vizier of Abrakhan
			set_culture = culture:pustic # The majority culture of Abrakhan
			create_title_and_vassal_change = {
				type = returned
				save_scope_as = change
				add_claim_on_loss = no
			}
			scope:golden_king = { #  Transfer lands
				every_held_title = {
					change_title_holder = {
						holder = scope:vizier_of_abrakhan
						change = scope:change
					}
				}
			}
			resolve_title_and_vassal_change = scope:change
		}
	}
	
	option = { # There is more I must do in the south my lord!
		name = sauron.1000.b
	}
}


sauron.2000 = { # Invasion of Gondor
	title = sauron.2000.t
	desc = sauron.2000.desc
	theme = war
	left_portrait = {
		character = root
		animation = personality_callous
	}
	right_portrait = {
		character = character:nazgul1 
		animation = anger
	}

	option = {
		name = sauron.2000.a
		if = {
			limit = { exists = title:e_gondor.holder }
			title:e_gondor.holder = { save_scope_as = gondor }
			start_war = {
				casus_belli = final_battle_mordor_cb
				target = scope:gondor
				target_title = title:k_anorien
			}
			title:e_gondor.holder = {
				trigger_event = {
					id = gondor.2600
					days = 1
				}
			}
		}
		if = {
			limit = { exists = title:e_gondor_steward.holder }
			title:e_gondor_steward.holder = { save_scope_as = gondor }
			start_war = {
				casus_belli = final_battle_mordor_cb
				target = scope:gondor
				target_title = title:k_anorien
			}
			title:e_gondor_steward.holder = {
				trigger_event = {
					id = gondor.2600
					days = 1
				}
			}
		}
		if = {
			limit = { exists = title:e_castamir.holder }
			title:e_castamir.holder = { save_scope_as = gondor }
			start_war = {
				casus_belli = final_battle_mordor_cb
				target = scope:gondor
				target_title = title:k_anorien
			}
			title:e_castamir.holder = {
				trigger_event = {
					id = gondor.2600
					days = 1
				}
			}
		}
	}
}

sauron.2001 = { # Victory against Gondor
	title = sauron.2001.t
	desc = sauron.2001.desc
	theme = war
	override_background = {
		event_background = grond
	}
	right_portrait = {
		character = root
		animation = personality_callous
	}
	
	option = {
		name = sauron.2001.a
	}
}

sauron.2002 = { # Notification of Mordor's victory
	title = sauron.2002.t
	desc = sauron.2002.desc
	theme = war
	override_background = {
		event_background = grond
	}
	left_portrait = {
		character = root
		animation = worry
	}
	right_portrait = {
		character = title:e_mordor.holder
		animation = personality_callous
	}
	
	option = {
		name = sauron.2002.a
	}
	option = {
		name = sauron.2002.b
	}
}
	
	
	
