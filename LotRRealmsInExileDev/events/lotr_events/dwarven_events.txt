namespace = dwarven

### Dwarven Events ###
#			dwarven.9000		I shave someone
#			dwarven.9001		I am shaved
#			dwarven.9002		Bearded again !
#			dwarven.0100		Erebor Starting Event
#			dwarven.0200		Balin Starting Event
#			dwarven.0300		Nordinbad Starting Event



###################################
### Dwarven Introduction Events ###
###################################

dwarven.0100 = { # Introduction to Dain
	title = dwarven.0100.t
	desc = dwarven.0100.desc
	theme = stewardship_duty_focus
	override_background = {
		reference = throne_room_dwarf
	}
	
	right_portrait = {
		character = root
		animation = personality_honorable
	}
	
	option = { 
		name = dwarven.0100.a
	}
}

dwarven.0200 = { # Introduction to Balin
	title = dwarven.0200.t
	desc = dwarven.0200.desc
	theme = martial_strategy_focus
	override_background = {
		reference = wilderness_underground
	}
	
	right_portrait = {
		character = root
		animation = celebrate_axe
	}
	
	option = { 
		name = dwarven.0200.a
	}
}

dwarven.0300 = { # Introduction to Gorin of Nordinbad
	title = dwarven.0300.t
	desc = dwarven.0300.desc
	theme = learning_scholarship_focus
	override_background = {
		reference = throne_room_dwarf
	}
	
	right_portrait = {
		character = root
		animation = personality_content
	}
	
	option = { 
		name = dwarven.0300.a
	}
}

#I shave someone
dwarven.9000 = { #by Mathilda Bjarnehed
	type = character_event
	title = dwarven.9000.t
	desc = {
		desc = prison.1020.start.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					OR = {
						ai_compassion < 0
						has_relation_rival = scope:recipient
					}
				}
				desc = dwarven.9000.cruel.desc
			}
			desc = prison.1020.compassionate.desc
		}
	}
	theme = prison
	left_portrait = {
		character = scope:actor
		animation = schadenfreude
	}
	right_portrait = {
		character = scope:recipient
		animation = fear
	}

	trigger = { scope:recipient = { is_imprisoned_by = scope:actor } }

	on_trigger_fail = {
		scope:recipient = {
			if = {
				limit = { has_character_flag = is_being_tortured }
				remove_character_flag = is_being_tortured
			}
		}
	}

	immediate = {
		play_music_cue = "mx_cue_prison"
		hidden_effect = {
			#For the text
			save_court_physician_as_effect = { SCOPE_NAME = physician }
			if = {
				limit = { NOT = { exists = scope:physician } }
				random_dummy_gender_physician_effect = yes
				scope:dummy_physician_gender = { save_scope_as = physician }
			}
		}
	}

	option = {
		name = {
			trigger = {
				OR = {
					has_trait = sadistic
					has_relation_rival = scope:recipient
				}
			}
			text = prison.1020.a
		}
		name = {
			trigger = {
				NAND = {
					OR = {
						has_trait = sadistic
						has_relation_rival = scope:recipient
					}
					scope:recipient = { is_adult = yes }
				}
			}
			text = prison.1020.b
		}
		show_as_tooltip = { shave_recipient_effect = yes }
		scope:recipient = {
			trigger_event = dwarven.9001
		}
	}
}

#I am shaved
dwarven.9001 = { #by Mathilda Bjarnehed
	type = character_event
	title = dwarven.9000.t
	desc = {
		desc = prison.1021.start.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:actor = {
						OR = {
							ai_compassion < 0
							has_relation_rival = scope:recipient
						}
					}
				}
				desc = dwarven.9001.cruel.desc
			}
			desc = dwarven.9001.compassionate.desc
		}
	}
	theme = prison
	left_portrait = {
		character = root
		animation = fear

	}
	right_portrait = {
		character = scope:actor
		animation = schadenfreude
	}

	trigger = { scope:recipient = { is_imprisoned_by = scope:actor } }

	on_trigger_fail = {
		scope:recipient = {
			if = {
				limit = { has_character_flag = is_being_tortured }
				remove_character_flag = is_being_tortured
			}
		}
	}

	immediate = {
		play_music_cue = "mx_cue_prison"
	}

	option = {
		name = {
			trigger = { is_adult = yes }
			text = dwarven.9001.a
		}
		shave_recipient_effect = yes
	}

	after = {
		add_character_flag = house_feud_shaving_flag
		house_feud_torture_event_effect = yes
	}
}

dwarven.9002 = { # Bearded Again !
	title = dwarven.9002.t
	desc = dwarven.9002.desc
	theme = crown
	right_portrait = {
		character = root
		animation = happiness
	}
	
	option = { #I can finally show my face again !
		name = dwarven.9002.a
		# custom_tooltip = dwarven.9002.att # There exists no loc key for this
		
		remove_trait = beardless
		add_stress = medium_stress_loss
	}
}
