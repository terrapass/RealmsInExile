namespace = tedjin

# Tedjin Events
# Tedjin.0100 = Tedjin start-up events (Character intros)


tedjin.0100 = { # Introduction to Ayal, Kataj of the Confederacy
	title = tedjin.0100.t
	desc = tedjin.0100.desc
	theme = stewardship_duty_focus
	left_portrait = {
		character = root
		animation = worry
	}
	right_portrait = {
		character = character:lineofazumenakhad79
		animation = worry
	}
	
	option = { # All my work for naught...
		name = tedjin.0100.a
	}
}

tedjin.0101 = { # Handling of the Death of Ayal - check if Bor is successor
	title = tedjin.0101.t
	desc = tedjin.0101.desc
	theme = death
	left_portrait = {
		character = root
		animation = pain
	}

	trigger = {
		character:lineofthezij42 = root
	}
	
	option = { # Bor is the heir to the confederacy
		name = tedjin.0101.a
		trigger = {
			character:lineofthezij51 = {
				has_title = title:k_tedjin
			}
		}
		character:lineofthezij51 = {
			trigger_event = {
				id = tedjin.0102
				days = 1
			}
		}
	}
	
	option = { # Bor is not the heir to the confederacy
		name = tedjin.0101.b
		trigger = {
			character:lineofthezij51 = {
				NOT = { has_title = title:k_tedjin }
			}
		}
		# CIVIL WAR IS DEFUSED OUTCOME
	}
}

tedjin.0102 = { # Death of Ayal - Bor rules the Confederacy - things could get ugly
	title = tedjin.0102.t
	desc = tedjin.0102.desc
	theme = death
	left_portrait = {
		character = root
		animation = angry
	}
	
	option = { # Things are about to get messy...
		name = tedjin.0102.a
		trigger_event = {
			id = tedjin.0103
			days = 7
		}
	}
}

tedjin.0103 = { # Bor decides how he should reign
	title = tedjin.0103.t
	desc = tedjin.0103.desc
	theme = death
	left_portrait = {
		character = root
		animation = angry
	}
	
	option = { # Reformist - A campaign of rigourous centralisation, conversion and modernisation
		name = tedjin.0103.a
		if = {
			limit = { has_realm_law = crown_authority_2 }
			add_realm_law = crown_authority_3
		}
		else_if = {
			limit = { has_realm_law = crown_authority_1 }
			add_realm_law = crown_authority_2
		}
		else_if = {
			limit = { has_realm_law = crown_authority_0 }
			add_realm_law = crown_authority_1
		} 
		add_character_modifier = {
			modifier = tedjin_reformer_modifier
		}
	}
	
	option = { # Moderate - A conventional ruler, trying to find the balance
		name = tedjin.0103.b
		stress_impact = {
			stubborn = medium_stress_impact_gain
		}
		add_character_modifier = {
			modifier = tedjin_moderate_modifier
		}
	}
	
	option = { # Conservative - Reconvert and give vassals their traditional freedoms
		name = tedjin.0103.c
		stress_impact = {
			stubborn = medium_stress_impact_gain
			zealous = major_stress_impact_gain
		}
		set_character_faith = faith:faith_easterling_war
		add_piety_level = -1
		add_character_modifier = {
			modifier = reconverted_tedjin_modifier
			years = 25
		}
		if = {
			limit = {
				character:lineofazumenakhad81 = { is_alive = yes }
			}
			remove_relation_rival = character:lineofazumenakhad81
			set_relation_friend = character:lineofazumenakhad81
		}
		every_vassal = {
			limit = {
				OR = {
					has_government = feudal_government
				}
			}
			vassal_contract_set_obligation_level = {
				type = war_declaration_rights
				level = war_declaration_rights_allowed
			}
		}
		every_vassal = {
			limit = {
				dynasty = dynasty:dynasty_azumenakhad
			}
			vassal_contract_set_obligation_level = {
				type = council_rights
				level = council_rights_guaranteed
			}			
		}
		every_vassal = {
			limit = {
				NOT = { faith = faith:faith_easterling_war } 
			}
			add_character_modifier = {
				modifier = reconverted_tedjin_liege_modifier
			}			
		}
	}
}