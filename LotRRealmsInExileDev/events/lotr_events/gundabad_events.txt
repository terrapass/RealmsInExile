namespace = gundabad

### Gundabad Events ###
#   Gundabad.0001-0199 Reserved for V4 Events

#	Gundabad.0200 - Decision - Rise of Gundabad
#	Gundabad.0201 - Decision - Gundabad morbs the North

gundabad.0200 = { # Our gang expands!
	content_source = realms
	type = character_event
	title = gundabad.0200.t
	desc = gundabad.0200.desc
	theme = realm
    override_background = { reference = wilderness_mountains }
	left_portrait = {
		character = root
		animation = celebrate_sword
	}
	
	option = { # Yar!
		name = gundabad.0200.a
		ROOT = { 
			spawn_army = {
				name = "gundabad_bois"
            	men_at_arms = {
                    type = gundabad_war_troll
                    stacks = 2
                }
            	men_at_arms = {
                    type = gundabad_blackshields
                    stacks = 6
                }
            	men_at_arms = {
                    type = gundabad_blackshields
                    stacks = 6
                }
            	men_at_arms = {
                    type = hunter_orcs_on_fell_wargs
                    stacks = 6
                }
            	men_at_arms = {
                    type = siege_tower
                    stacks = 8
                }
            	location = capital_province
				uses_supply = no
                save_scope_as = gundabad_bois
            }
	    }
		if = {
			limit = { # Major News
				NOT = { has_game_rule = no_news }
			}
			every_player = { #Global News Announcement
				trigger_event = news_event.0023
			}
		}
	}
}

gundabad.0201 = { # but there are still some pesky humans...
	content_source = realms
	type = character_event
	title = gundabad.0201.t
	desc = gundabad.0201.desc
	theme = war
	orphan = yes # WIP event, adding this to prevent errors from being thrown, remove when ID is referenced somewhere
    override_background = { reference = army_camp }

	left_portrait = {
		character = root
		animation = laugh
	}
	right_portrait = {
		character = character:lineoforopher3
		animation = shame
	}

	option = { # Yar!
		name = gundabad.0201.a
		add_gold = 2000
		add_stress = -50
	}
}

gundabad.1001 = { # Local vassals in Langwell
	content_source = realms
	type = character_event
	title = gundabad.1001.t
	desc = gundabad.1001.desc
	theme = realm
    override_background = { reference = wilderness_mountains }
	left_portrait = {
		character = root
		animation = personality_cynical
	}
	right_portrait = {
		character = scope:lackey
		animation = personality_coward
	}

	immediate = {
		create_character = {
			gender = male
			age = { 28 50 }
			culture = culture:framling
			faith = root.faith
			trait = cynical
			trait = craven
			trait = trusting
			trait = education_diplomacy_3
			trait = loyal
			save_scope_as = lackey
			location = capital_province
		}
		save_scope_as = this_char
	}
	
	option = { # Grant my lands to local-culture people
		name = gundabad.1001.a
		custom_tooltip = {
			text = gundabad.1001.a.effect
			every_held_title = {
				limit = {
					kingdom = title:k_langwell
					tier = tier_county
				}
				create_character = {
					gender = male
					age = { 28 50 }
					culture = this.culture
					random_traits_list = {
						count = 3
						content = {}
						craven = {}
						trusting = {}
						loyal = {}
						wrathful = {}
						lustful = {}
						lazy = {}
						honest = {}
						humble = {}
						gluttonous = {}
						patient = {}
						zealous = {}
					}
					random_traits_list = {
						count = 1
						education_diplomacy_3 = {}
						education_diplomacy_2 = {}
						education_diplomacy_1 = {}
						education_stewardship_3 = {}
						education_stewardship_2 = {}
						education_stewardship_1 = {}
						education_martial_3 = {}
						education_martial_2 = {}
						education_martial_1 = {}
					}
					faith = root.faith
					save_scope_as = new_ruler
					location = capital_province
				}
				create_title_and_vassal_change = {
					type = granted
					save_scope_as = title_change
					add_claim_on_loss = no
				}
				change_title_holder = {
					holder = scope:new_ruler
					change = scope:title_change
				}
				resolve_title_and_vassal_change = scope:title_change
				root = {
					hidden_effect = {
						add_hook_no_toast = {
							type = loyalty_hook
							target = scope:new_ruler
						}
						reverse_add_opinion = {
							target = scope:new_ruler
							modifier = received_title_county
						}
					}
				}
			}
		}
	}
	option = { # Grant all lands local-culture people
		name = gundabad.1001.b
		custom_tooltip = {
			text = gundabad.1001.a.effect
			every_held_title = {
				limit = {
					kingdom = title:k_langwell
					tier = tier_county
				}
				create_character = {
					gender = male
					age = { 28 50 }
					culture = this.culture
					random_traits_list = {
						count = 3
						content = {}
						craven = {}
						trusting = {}
						loyal = {}
						wrathful = {}
						lustful = {}
						lazy = {}
						honest = {}
						humble = {}
						gluttonous = {}
						patient = {}
						zealous = {}
					}
					random_traits_list = {
						count = 1
						education_diplomacy_3 = {}
						education_diplomacy_2 = {}
						education_diplomacy_1 = {}
						education_stewardship_3 = {}
						education_stewardship_2 = {}
						education_stewardship_1 = {}
						education_martial_3 = {}
						education_martial_2 = {}
						education_martial_1 = {}
					}
					faith = root.faith
					save_scope_as = new_ruler
					location = capital_province
				}
				create_title_and_vassal_change = {
					type = granted
					save_scope_as = title_change
					add_claim_on_loss = no
				}
				change_title_holder = {
					holder = scope:new_ruler
					change = scope:title_change
				}
				resolve_title_and_vassal_change = scope:title_change
				root = {
					hidden_effect = {
						add_hook_no_toast = {
							type = loyalty_hook
							target = scope:new_ruler
						}
						reverse_add_opinion = {
							target = scope:new_ruler
							modifier = received_title_county
						}
					}
				}
			}
		}
		custom_tooltip = {
			text = gundabad.1001.b.effect
			title:k_langwell = {
				every_in_de_jure_hierarchy = {
					limit = {
						tier = tier_county
						holder = { 
							is_ai = yes
							NOT = { culture = prev.culture }
							NOT = { faith = root.faith }
						}
					}
					create_character = {
						gender = male
						age = { 28 50 }
						culture = this.culture
						random_traits_list = {
							count = 3
							content = {}
							craven = {}
							trusting = {}
							loyal = {}
							wrathful = {}
							lustful = {}
							lazy = {}
							honest = {}
							humble = {}
							gluttonous = {}
							patient = {}
							zealous = {}
						}
						random_traits_list = {
							count = 1
							education_diplomacy_3 = {}
							education_diplomacy_2 = {}
							education_diplomacy_1 = {}
							education_stewardship_3 = {}
							education_stewardship_2 = {}
							education_stewardship_1 = {}
							education_martial_3 = {}
							education_martial_2 = {}
							education_martial_1 = {}
						}
						faith = root.faith
						save_scope_as = new_ruler
						location = capital_province
					}
					create_title_and_vassal_change = {
						type = granted
						save_scope_as = title_change
						add_claim_on_loss = no
					}
					change_title_holder = {
						holder = scope:new_ruler
						change = scope:title_change
					}
					resolve_title_and_vassal_change = scope:title_change
					root = {
						hidden_effect = {
							add_hook_no_toast = {
								type = loyalty_hook
								target = scope:new_ruler
							}
							reverse_add_opinion = {
								target = scope:new_ruler
								modifier = received_title_county
							}
						}
					}
				}
			}
		}
		add_tyranny = 50
	}
	option = { # Ravage the land en masse
		name = gundabad.1001.c
		custom_tooltip = {
			text = gundabad.1001.c.effect1
		}
		custom_tooltip = {
			text = gundabad.1001.c.effect2
		}
		custom_tooltip = {
			text = gundabad.1001.c.effect3
		}
		title:c_framsburg = { 
			if = {
				limit = {
					title_province = {
						has_special_building = wonder_framsburg_03
					}
				}
				hidden_effect = {
					remove_building = wonder_framsburg_03
				}
				add_special_building = wonder_framsburg_02
			}
		}
		hidden_effect = {
			every_sub_realm_county = {
				limit = {
					kingdom = title:k_langwell
					tier = tier_county
				}
				if = {
					limit = {
						holder = { 
							is_ai = yes
							is_orc = no
						}
					}
					create_title_and_vassal_change = {
						type = revoked
						save_scope_as = title_change
						add_claim_on_loss = no
					}
					change_title_holder = {
						holder = root
						change = scope:title_change
					}
					resolve_title_and_vassal_change = scope:title_change
				}
				if = {
					limit = {
						NOT = { culture = root.culture }
					}
					add_county_modifier = {
						modifier = gundabad_ravaged_lands_county_modifier
						years = 10
					}
					random = {
						chance = 65
						set_county_culture = root.culture
						set_county_faith = root.faith
					}
				}
			}
		}
	}

	option = { # I don't care...
		name = gundabad.1001.d
	}

	after = {
		scope:lackey = { 
			silent_disappearance_effect = yes
		}
	}
}