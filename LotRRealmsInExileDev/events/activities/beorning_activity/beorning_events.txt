# Events for handling the Skinchanger activity

namespace = beorning

############################
## Random events in port
## by ispanets
## 
## 0001: The Honey Incident
## 0011: A Mountain Raid
## 0021: A Lost Homeland
############################

beorning.0001 = {
	type = character_event
	title = beorning.0001.t
	desc = beorning.0001.desc
	theme = tavern
	left_portrait = {
		character = root
		animation = worry
	}
	
	option = {  # Let the manservant in
		name = beorning.0001.a
		trigger_event = beorning.0002
		add_character_modifier = {
			modifier = hives_raided_modifier
			years = 3
		}
		ai_chance = {
			base = 50
		}
	}

	option = {  # Turn away the manservant
		name = beorning.0001.b
		trigger_event = beorning.0003		
		add_character_modifier = {
			modifier = hives_raided_modifier
			years = 3
		}
		ai_chance = {
			base = 50
		}
	}
}

# Let the manservant in
beorning.0002 = {
	type = character_event
	title = beorning.0002.t
	desc = beorning.0002.desc
	theme = tavern
	left_portrait = {
		character = root
		animation = shame
	}
	
	right_portrait = {
		character = scope:manservant
		animation = shame
	}

	trigger = {
		scope:activity = {
			has_variable_list = potential_beorning_participant
			any_in_list = {
					variable = potential_beorning_participant
					is_alive = yes
					count >= 1
			}
		}
	}

	immediate = {
		scope:activity = {
			random_in_list = {
				variable = potential_beorning_participant
				limit = {
					is_alive = yes
				}
				save_scope_as = manservant
			}
		}
	}
	
	option = {  
		name = beorning.0002.a
		trigger_event = beorning.9000
		scope:manservant = {
			add_opinion = {				
				modifier = respect_opinion
				opinion = -20
				target = root
			}
		}		
		ai_chance = {
			base = 50
		}
	}
}


# Turned the manservant away
beorning.0003 = {
	type = character_event
	title = beorning.0003.t
	desc = beorning.0003.desc
	theme = tavern
	left_portrait = {
		character = root
		animation = shame
	}
	
	option = {  
		name = beorning.0003.a
		trigger_event = beorning.9000
		random = {
			chance = 33
			add_trait = reclusive
		}	
		ai_chance = {
			base = 50
		}
	}

}

#beorning.0011 = {
#
#}
#
#beorning.0021 = {
#
#}

beorning.9000 = {
	hidden = {
		if = {
			limit = {
				exists = scope:activity
			}
			scope:activity = {
				complete_activity = yes
			}
		}	
	}	
}